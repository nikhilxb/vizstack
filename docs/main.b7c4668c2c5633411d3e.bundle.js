(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{343:function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const React=__importStar(__webpack_require__(0)),cuid_1=__importDefault(__webpack_require__(344)),Button_1=__importDefault(__webpack_require__(868)),js_1=__webpack_require__(346),TextPrimitive_1=__importDefault(__webpack_require__(804)),TokenPrimitive_1=__importDefault(__webpack_require__(839)),IconPrimitive_1=__importDefault(__webpack_require__(840)),ImagePrimitive_1=__importDefault(__webpack_require__(847)),FlowLayout_1=__importDefault(__webpack_require__(848)),SwitchLayout_1=__importDefault(__webpack_require__(849)),GridLayout_1=__importDefault(__webpack_require__(850)),SequenceLayout_1=__importDefault(__webpack_require__(851)),KeyValueLayout_1=__importDefault(__webpack_require__(852)),DagLayout_1=__importDefault(__webpack_require__(853)),interaction_1=__webpack_require__(366);class Viewer extends React.PureComponent{constructor(props){super(props),this._childFragmentRef=React.createRef(),this.state={bypassedCycle:!1,light:"normal"},this.viewerId=cuid_1.default()}componentDidMount(){this.context.registerViewer(this.viewerId,()=>this._getHandle())}componentWillUnmount(){this.context.unregisterViewer(this.viewerId)}componentDidUpdate(prevProps,prevState){const{light:light}=this.state,{emit:emit}=this.context,viewerId=this.viewerId;light!==prevState.light&&emit("Viewer.DidChangeLight",{viewerId:viewerId,light:light})}_getFragmentId(){const{view:view,fragmentId:fragmentId}=this.props;return fragmentId||view.rootId}_getFragment(){const{view:view}=this.props;return view.fragments[this._getFragmentId()]}_getHandle(){const{parentId:parentId}=this.props,{light:light}=this.state,fragment=this._getFragment();return{viewerId:this.viewerId,parentId:parentId,fragmentId:this._getFragmentId(),meta:fragment.meta,appearance:{light:light,doSetLight:l=>this.setState({light:l})},type:fragment.type,contents:fragment.contents,state:this._childFragmentRef.current.getHandle()}}_isCycle(){return!1}render(){const{view:view,fragmentId:fragmentId}=this.props,{emit:emit}=this.context,{bypassedCycle:bypassedCycle,light:light}=this.state,viewerId=this.viewerId,fragment=this._getFragment();if(!fragment)return console.error("Invalid FragmentId within View: ",fragmentId,view),null;if(this._isCycle()&&!bypassedCycle)return React.createElement(Button_1.default,{onClick:()=>this.setState({bypassedCycle:!0})},"...");const passdown={view:view,parentId:viewerId},interactions={viewerId:viewerId,emit:emit,mouseHandlers:{onClick:e=>{e.stopPropagation(),emit("Viewer.DidClick",{viewerId:viewerId})},onDoubleClick:e=>{e.stopPropagation(),emit("Viewer.DidDoubleClick",{viewerId:viewerId})},onMouseOver:e=>{e.stopPropagation(),emit("Viewer.DidMouseOver",{viewerId:viewerId})},onMouseOut:e=>{e.stopPropagation(),emit("Viewer.DidMouseOut",{viewerId:viewerId})}}},props=Object.assign({ref:this._childFragmentRef,interactions:interactions,passdown:passdown,light:light},fragment.contents);switch(fragment.type){case"TextPrimitive":return React.createElement(TextPrimitive_1.default,Object.assign({},props));case"TokenPrimitive":return React.createElement(TokenPrimitive_1.default,Object.assign({},props));case"IconPrimitive":return React.createElement(IconPrimitive_1.default,Object.assign({},props));case"ImagePrimitive":return React.createElement(ImagePrimitive_1.default,Object.assign({},props));case"FlowLayout":return React.createElement(FlowLayout_1.default,Object.assign({},props));case"SwitchLayout":return React.createElement(SwitchLayout_1.default,Object.assign({},props));case"GridLayout":return React.createElement(GridLayout_1.default,Object.assign({},props));case"SequenceLayout":return React.createElement(SequenceLayout_1.default,Object.assign({},props));case"KeyValueLayout":return React.createElement(KeyValueLayout_1.default,Object.assign({},props));case"DagLayout":return React.createElement(DagLayout_1.default,Object.assign({},props));default:return console.error(`Unknown Fragment type "${fragment.type}" passed to Viewer ${this.viewerId}`),null}}}Viewer.contextType=interaction_1.InteractionContext,exports.Viewer=Viewer;class ViewerRoot extends React.PureComponent{render(){const{view:view,fragmentId:fragmentId}=this.props,schematized=view instanceof js_1.FragmentAssembler?js_1.assemble(view):view;return React.createElement(Viewer,{view:schematized,fragmentId:fragmentId||schematized.rootId})}}exports.ViewerRoot=ViewerRoot;try{Viewer.displayName="Viewer",Viewer.__docgenInfo={description:"",displayName:"Viewer",props:{view:{defaultValue:null,description:"Specification of View's root fragment and sub-fragments.",name:"view",required:!0,type:{name:"View"}},fragmentId:{defaultValue:null,description:"Unique `FragmentId` for the `Fragment` to be rendered by this `Viewer` at the current\nlevel of nesting.",name:"fragmentId",required:!0,type:{name:"FragmentId"}},parentId:{defaultValue:null,description:"Unique `ViewerId` for the parent `Viewer`, if one exists.",name:"parentId",required:!1,type:{name:"ViewerId"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Viewer/Viewer.tsx#Viewer"]={docgenInfo:Viewer.__docgenInfo,name:"Viewer",path:"src/Viewer/Viewer.tsx#Viewer"})}catch(__react_docgen_typescript_loader_error){}try{ViewerRoot.displayName="ViewerRoot",ViewerRoot.__docgenInfo={description:"A `Viewer` is used to render a `View`, conforming to the schema in `@vizstack/schema`, which has\nbeen constructed manually or produced through language bindings. For convenience, it is\r\npossible to pass the `@vizstack/js` bindings directly to the `Viewer`.\n@example ```\r// JS-bindings input\r<Viewer view={Text('Hello, world!')} />\r\r// Schema input\r<Viewer view={{\r    rootId: 'root',\r    fragments: {\r      root: {\r        type: 'TextPrimitive',\r        contents: { text: 'Hello, world!' },\r        meta: {},\r      }\r    }\r  }} />\r```",displayName:"ViewerRoot",props:{view:{defaultValue:null,description:"",name:"view",required:!0,type:{name:"View | FragmentAssembler"}},fragmentId:{defaultValue:null,description:"",name:"fragmentId",required:!1,type:{name:"FragmentId"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Viewer/Viewer.tsx#ViewerRoot"]={docgenInfo:ViewerRoot.__docgenInfo,name:"ViewerRoot",path:"src/Viewer/Viewer.tsx#ViewerRoot"})}catch(__react_docgen_typescript_loader_error){}},346:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var view_assembler_1=__webpack_require__(789);exports.assemble=view_assembler_1.assemble;var fragment_assembler_1=__webpack_require__(45);exports.FragmentAssembler=fragment_assembler_1.FragmentAssembler,function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(347))},347:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var dag_1=__webpack_require__(794);exports.Dag=dag_1.Dag;var flow_1=__webpack_require__(795);exports.Flow=flow_1.Flow;var grid_1=__webpack_require__(796);exports.Grid=grid_1.Grid;var icon_1=__webpack_require__(797);exports.Icon=icon_1.Icon;var image_1=__webpack_require__(798);exports.Image=image_1.Image;var key_value_1=__webpack_require__(799);exports.KeyValue=key_value_1.KeyValue;var sequence_1=__webpack_require__(800);exports.Sequence=sequence_1.Sequence;var switch_1=__webpack_require__(801);exports.Switch=switch_1.Switch;var text_1=__webpack_require__(802);exports.Text=text_1.Text;var token_1=__webpack_require__(803);exports.Token=token_1.Token},348:function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const React=__importStar(__webpack_require__(0)),clsx_1=__importDefault(__webpack_require__(11)),styles_1=__webpack_require__(41),theme_1=__importDefault(__webpack_require__(58));class TextPrimitive extends React.PureComponent{constructor(props){super(props),this.state={}}getHandle(){return{}}componentDidUpdate(prevProps,prevState){}render(){const{classes:classes,text:text,variant:variant,emphasis:emphasis,interactions:interactions,light:light}=this.props,{mouseHandlers:mouseHandlers}=interactions,split=text.split("\n"),lines=split.map((text,i)=>React.createElement("span",{key:i},text,i<split.length-1?React.createElement("br",null):null)),names=clsx_1.default({[classes.container]:!0,[classes.containerLowlight]:"lowlight"===light,[classes.containerHighlight]:"highlight"===light,[classes.containerSelected]:"selected"===light,[classes.emphasisNormal]:"normal"===emphasis,[classes.emphasisLess]:"less"===emphasis,[classes.emphasisMore]:"more"===emphasis,[classes.variantBody]:"body"===variant,[classes.variantCaption]:"caption"===variant,[classes.variantSubheading]:"subheading"===variant,[classes.variantHeading]:"heading"===variant});return React.createElement("span",Object.assign({className:names},mouseHandlers),lines)}}TextPrimitive.defaultProps={variant:"body",emphasis:"normal"};exports.default=styles_1.withStyles(theme=>styles_1.createStyles({container:{textAlign:"left",overflow:"hidden",width:"fit-content",backgroundColor:theme.vars.unframed.normal.backgroundColor,borderBottomStyle:theme.vars.unframed.normal.borderStyle,borderBottomWidth:theme.vars.unframed.normal.borderWidth,borderBottomColor:theme.vars.unframed.normal.borderColor},containerHighlight:{borderBottomColor:theme.vars.unframed.highlight.borderColor},containerLowlight:{},containerSelected:{borderBottomColor:theme.vars.unframed.selected.borderColor},emphasisNormal:{color:theme.vars.emphasis.normal},emphasisLess:{color:theme.vars.emphasis.less},emphasisMore:{color:theme.vars.emphasis.more},variantBody:Object.assign({},theme.vars.text.body),variantCaption:Object.assign({},theme.vars.text.caption),variantSubheading:Object.assign({},theme.vars.text.subheading),variantHeading:Object.assign({},theme.vars.text.heading)}),{defaultTheme:theme_1.default})(TextPrimitive);try{TextPrimitive.displayName="TextPrimitive",TextPrimitive.__docgenInfo={description:"",displayName:"TextPrimitive",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/primitives/TextPrimitive/TextPrimitive.tsx#TextPrimitive"]={docgenInfo:TextPrimitive.__docgenInfo,name:"TextPrimitive",path:"src/primitives/TextPrimitive/TextPrimitive.tsx#TextPrimitive"})}catch(__react_docgen_typescript_loader_error){}},349:function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const React=__importStar(__webpack_require__(0)),clsx_1=__importDefault(__webpack_require__(11)),styles_1=__webpack_require__(41),theme_1=__importDefault(__webpack_require__(58));class TokenPrimitive extends React.PureComponent{constructor(props){super(props),this.state={}}getHandle(){return{}}componentDidUpdate(prevProps,prevState){}render(){const{classes:classes,text:text,color:color,interactions:interactions,light:light}=this.props,{mouseHandlers:mouseHandlers}=interactions,split=text.split("\n"),lines=split.map((text,i)=>React.createElement("span",{key:i},text,i<split.length-1?React.createElement("br",null):null)),names=clsx_1.default({[classes.token]:!0,[classes.gray]:"gray"===color,[classes.brown]:"brown"===color,[classes.purple]:"purple"===color,[classes.blue]:"blue"===color,[classes.green]:"green"===color,[classes.yellow]:"yellow"===color,[classes.orange]:"orange"===color,[classes.red]:"red"===color,[classes.pink]:"pink"===color});return React.createElement("div",Object.assign({className:names},mouseHandlers),lines)}}TokenPrimitive.defaultProps={color:"gray"};exports.default=styles_1.withStyles(theme=>styles_1.createStyles({token:Object.assign({textAlign:"left",verticalAlign:"middle",wordWrap:"break-word",display:"inline-block",overflow:"hidden",width:"fit-content",padding:`${theme.scale(2)}px ${theme.scale(4)}px`,borderRadius:theme.scale(2),color:theme.vars.emphasis.normal},theme.vars.text.body),gray:{backgroundColor:theme.vars.fills.gray},brown:{backgroundColor:theme.vars.fills.brown},purple:{backgroundColor:theme.vars.fills.purple},blue:{backgroundColor:theme.vars.fills.blue},green:{backgroundColor:theme.vars.fills.green},yellow:{backgroundColor:theme.vars.fills.yellow},orange:{backgroundColor:theme.vars.fills.orange},red:{backgroundColor:theme.vars.fills.red},pink:{backgroundColor:theme.vars.fills.pink}}),{defaultTheme:theme_1.default})(TokenPrimitive);try{TokenPrimitive.displayName="TokenPrimitive",TokenPrimitive.__docgenInfo={description:"",displayName:"TokenPrimitive",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/primitives/TokenPrimitive/TokenPrimitive.tsx#TokenPrimitive"]={docgenInfo:TokenPrimitive.__docgenInfo,name:"TokenPrimitive",path:"src/primitives/TokenPrimitive/TokenPrimitive.tsx#TokenPrimitive"})}catch(__react_docgen_typescript_loader_error){}},350:function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const React=__importStar(__webpack_require__(0)),clsx_1=__importDefault(__webpack_require__(11)),styles_1=__webpack_require__(41),Icon_1=__importDefault(__webpack_require__(872));__webpack_require__(841);const theme_1=__importDefault(__webpack_require__(58));class IconPrimitive extends React.PureComponent{constructor(props){super(props),this.state={}}getHandle(){return{}}componentDidUpdate(prevProps,prevState){}render(){const{classes:classes,name:name,emphasis:emphasis,interactions:interactions,light:light}=this.props,{mouseHandlers:mouseHandlers}=interactions;return React.createElement("div",{className:classes.container},React.createElement(Icon_1.default,Object.assign({className:clsx_1.default({[classes.icon]:!0,[classes.emphasisNormal]:"normal"===emphasis,[classes.emphasisLess]:"less"===emphasis,[classes.emphasisMore]:"more"===emphasis})},mouseHandlers),`${name}_outlined`))}}exports.default=styles_1.withStyles(theme=>styles_1.createStyles({container:{display:"inline-block",verticalAlign:"middle"},icon:Object.assign({},theme.vars.icon),emphasisNormal:{color:theme.vars.emphasis.normal},emphasisLess:{color:theme.vars.emphasis.less},emphasisMore:{color:theme.vars.emphasis.more}}),{defaultTheme:theme_1.default})(IconPrimitive);try{IconPrimitive.displayName="IconPrimitive",IconPrimitive.__docgenInfo={description:"",displayName:"IconPrimitive",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/primitives/IconPrimitive/IconPrimitive.tsx#IconPrimitive"]={docgenInfo:IconPrimitive.__docgenInfo,name:"IconPrimitive",path:"src/primitives/IconPrimitive/IconPrimitive.tsx#IconPrimitive"})}catch(__react_docgen_typescript_loader_error){}},351:function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const React=__importStar(__webpack_require__(0)),clsx_1=__importDefault(__webpack_require__(11)),styles_1=__webpack_require__(41),theme_1=__importDefault(__webpack_require__(58));class ImagePrimitive extends React.PureComponent{constructor(props){super(props),this.state={}}getHandle(){return{}}componentDidUpdate(prevProps,prevState){}render(){const{classes:classes,location:location,interactions:interactions,light:light}=this.props,{mouseHandlers:mouseHandlers}=interactions;return React.createElement("img",Object.assign({className:clsx_1.default({[classes.image]:!0,[classes.imageHighlight]:"highlight"===light}),src:location,onError:e=>{e.target.onerror=null,e.target.src="./img-not-found.png"}},mouseHandlers))}}exports.default=styles_1.withStyles(theme=>styles_1.createStyles({image:{marginLeft:theme.scale(8),marginRight:theme.scale(8),borderColor:"transparent"},imageHighlight:{borderColor:theme.palette.primary.light}}),{defaultTheme:theme_1.default})(ImagePrimitive);try{ImagePrimitive.displayName="ImagePrimitive",ImagePrimitive.__docgenInfo={description:"",displayName:"ImagePrimitive",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/primitives/ImagePrimitive/ImagePrimitive.tsx#ImagePrimitive"]={docgenInfo:ImagePrimitive.__docgenInfo,name:"ImagePrimitive",path:"src/primitives/ImagePrimitive/ImagePrimitive.tsx#ImagePrimitive"})}catch(__react_docgen_typescript_loader_error){}},352:function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const React=__importStar(__webpack_require__(0)),clsx_1=__importDefault(__webpack_require__(11)),styles_1=__webpack_require__(41),theme_1=__importDefault(__webpack_require__(58)),Viewer_1=__webpack_require__(86);class FlowLayout extends React.PureComponent{constructor(props){super(props),this._childViewers=[],this.state={selectedElementIdx:0}}_registerViewer(viewer,idx){this._childViewers[idx]=viewer}getHandle(){const{selectedElementIdx:selectedElementIdx}=this.state;return{elements:this._childViewers.map(viewer=>viewer.viewerId),selectedElementIdx:selectedElementIdx,doSelectElement:idx=>{this.setState({selectedElementIdx:idx})},doIncrementElement:(delta=1)=>{const{elements:elements}=this.props;this.setState(state=>{let elementIdx=state.selectedElementIdx+delta;return{selectedElementIdx:elementIdx=(elementIdx%elements.length+elements.length)%elements.length}})}}}componentDidUpdate(prevProps,prevState){const{viewerId:viewerId,emit:emit}=this.props.interactions,{selectedElementIdx:selectedElementIdx}=this.state;selectedElementIdx!==prevState.selectedElementIdx&&emit("Flow.DidSelectElement",{viewerId:viewerId,selectedElementIdx:selectedElementIdx})}render(){const{classes:classes,elements:elements,passdown:passdown,interactions:interactions}=this.props,{mouseHandlers:mouseHandlers}=interactions;return React.createElement("div",Object.assign({className:clsx_1.default({[classes.root]:!0})},mouseHandlers),elements.map((fragmentId,idx)=>React.createElement(React.Fragment,null,React.createElement(Viewer_1.Viewer,Object.assign({ref:viewer=>this._registerViewer(viewer,idx),key:`${idx}-${fragmentId}`},passdown,{fragmentId:fragmentId})),idx<elements.length-1?React.createElement("span",{className:classes.spacer}):null)))}}exports.default=styles_1.withStyles(theme=>styles_1.createStyles({root:{borderColor:"transparent"},hovered:{borderColor:theme.palette.primary.light},spacer:{marginRight:theme.vars.slot.spacing}}),{defaultTheme:theme_1.default})(FlowLayout);try{FlowLayout.displayName="FlowLayout",FlowLayout.__docgenInfo={description:"",displayName:"FlowLayout",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/layouts/FlowLayout/FlowLayout.tsx#FlowLayout"]={docgenInfo:FlowLayout.__docgenInfo,name:"FlowLayout",path:"src/layouts/FlowLayout/FlowLayout.tsx#FlowLayout"})}catch(__react_docgen_typescript_loader_error){}},353:function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const React=__importStar(__webpack_require__(0)),clsx_1=__importDefault(__webpack_require__(11)),styles_1=__webpack_require__(41),theme_1=__importDefault(__webpack_require__(58)),Viewer_1=__webpack_require__(86);class SwitchLayout extends React.PureComponent{_registerViewer(viewer){this._childViewer=viewer}constructor(props){super(props),this.state={selectedModeIdx:0}}getHandle(){const{selectedModeIdx:selectedModeIdx}=this.state;return{mode:this._childViewer.viewerId,selectedModeIdx:selectedModeIdx,doSelectMode:idx=>{this.setState({selectedModeIdx:idx})},doIncrementMode:(delta=1)=>{const{modes:modes}=this.props;this.setState(state=>{let modeIdx=state.selectedModeIdx+delta;return{selectedModeIdx:modeIdx=(modeIdx%modes.length+modes.length)%modes.length}})}}}componentDidUpdate(prevProps,prevState){const{viewerId:viewerId,emit:emit}=this.props.interactions,{selectedModeIdx:selectedModeIdx}=this.state;selectedModeIdx!==prevState.selectedModeIdx&&emit("Switch.DidSelectMode",{viewerId:viewerId,selectedModeIdx:selectedModeIdx})}render(){const{classes:classes,modes:modes,passdown:passdown,interactions:interactions,light:light}=this.props,{mouseHandlers:mouseHandlers}=interactions,{selectedModeIdx:selectedModeIdx}=this.state,fragmentId=modes[selectedModeIdx];return React.createElement("div",Object.assign({className:clsx_1.default({[classes.container]:!0,[classes.containerHovered]:"highlight"===light})},mouseHandlers),React.createElement("div",{key:fragmentId},React.createElement(Viewer_1.Viewer,Object.assign({ref:viewer=>this._registerViewer(viewer),key:fragmentId},passdown,{fragmentId:fragmentId}))))}}exports.default=styles_1.withStyles(theme=>styles_1.createStyles({container:{padding:theme.scale(4),display:"inline-block"},containerHovered:{borderColor:theme.palette.primary.light}}),{defaultTheme:theme_1.default})(SwitchLayout);try{SwitchLayout.displayName="SwitchLayout",SwitchLayout.__docgenInfo={description:"",displayName:"SwitchLayout",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/layouts/SwitchLayout/SwitchLayout.tsx#SwitchLayout"]={docgenInfo:SwitchLayout.__docgenInfo,name:"SwitchLayout",path:"src/layouts/SwitchLayout/SwitchLayout.tsx#SwitchLayout"})}catch(__react_docgen_typescript_loader_error){}},354:function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const React=__importStar(__webpack_require__(0)),clsx_1=__importDefault(__webpack_require__(11)),styles_1=__webpack_require__(41),theme_1=__importDefault(__webpack_require__(58)),Viewer_1=__webpack_require__(86);class GridLayout extends React.PureComponent{constructor(props){super(props),this._childViewers=[],this.state={selectedCellIdx:0}}_registerViewer(viewer,idx){this._childViewers[idx]=viewer}getHandle(){const{selectedCellIdx:selectedCellIdx}=this.state;return{cells:this._childViewers.map(viewer=>viewer.viewerId),selectedCellIdx:selectedCellIdx,doSelectCell:cellIdx=>{this.setState({selectedCellIdx:cellIdx})},doSelectNeighborCell:direction=>{this.setState((state,props)=>{const{cells:cells}=props,currentElem=cells[state.selectedCellIdx];let mainAxis,offAxis,increaseMainAxis;switch(direction){case"south":mainAxis="row",offAxis="col",increaseMainAxis=!0;break;case"east":mainAxis="col",offAxis="row",increaseMainAxis=!0;break;case"north":mainAxis="row",offAxis="col",increaseMainAxis=!1;break;default:case"west":mainAxis="col",offAxis="row",increaseMainAxis=!1}const mainSize="row"===mainAxis?"height":"width",mainEdge=increaseMainAxis?currentElem[mainAxis]+currentElem[mainSize]:currentElem[mainAxis],cellPenalties=cells.map((cell,i)=>{const penalty={idx:i,off:0,main:0,valid:!0};return(i===state.selectedCellIdx||increaseMainAxis&&cell[mainAxis]<mainEdge||!increaseMainAxis&&cell[mainAxis]>=mainEdge)&&(penalty.valid=!1),penalty.off=Math.abs(cell[offAxis]-currentElem[offAxis]),penalty.main=Math.abs(cell[mainAxis]-mainEdge),penalty}).filter(c=>c.valid).sort((c1,c2)=>c1.off===c2.off?c1.main-c2.main:c1.off-c2.off);return cellPenalties.length>0?{selectedCellIdx:cellPenalties[0].idx}:{selectedCellIdx:selectedCellIdx}})}}}componentDidUpdate(prevProps,prevState){const{viewerId:viewerId,emit:emit}=this.props.interactions,{selectedCellIdx:selectedCellIdx}=this.state;selectedCellIdx!==prevState.selectedCellIdx&&emit("Grid.DidSelectCell",{viewerId:viewerId,selectedCellIdx:selectedCellIdx,prevSelectedCellIdx:prevState.selectedCellIdx})}render(){const{classes:classes,cells:cells,passdown:passdown,interactions:interactions,light:light}=this.props,{mouseHandlers:mouseHandlers}=interactions,{selectedCellIdx:selectedCellIdx}=this.state;return React.createElement("div",Object.assign({className:clsx_1.default({[classes.frame]:!0,[classes.frameLowlight]:"lowlight"===light,[classes.frameHighlight]:"highlight"===light,[classes.frameSelected]:"selected"===light})},mouseHandlers),cells.map(({fragmentId:fragmentId,col:col,row:row,width:width,height:height},idx)=>React.createElement("div",{key:`${idx}-${fragmentId}`,className:clsx_1.default({[classes.cell]:!0}),style:{gridColumn:`${col+1} / ${col+1+width}`,gridRow:`${row+1} / ${row+1+height}`}},React.createElement(Viewer_1.Viewer,Object.assign({ref:viewer=>this._registerViewer(viewer,idx)},passdown,{fragmentId:fragmentId})))))}}exports.default=styles_1.withStyles(theme=>styles_1.createStyles({frame:Object.assign({display:"inline-grid",verticalAlign:"middle",gridGap:`${theme.vars.slot.spacing}px`,justifyContent:"start",gridAutoColumns:"max-content",gridAutoRows:"max-content"},theme.vars.framed.normal),frameHighlight:Object.assign({},theme.vars.framed.highlight),frameLowlight:Object.assign({},theme.vars.framed.lowlight),frameSelected:Object.assign({},theme.vars.framed.selected),cell:{textAlign:"left",borderTopStyle:theme.vars.slot.borderStyle,borderTopColor:theme.vars.slot.borderColor,borderTopWidth:theme.vars.slot.borderWidth,borderLeftStyle:theme.vars.slot.borderStyle,borderLeftColor:theme.vars.slot.borderColor,borderLeftWidth:theme.vars.slot.borderWidth,padding:theme.vars.slot.padding}}),{defaultTheme:theme_1.default})(GridLayout);try{GridLayout.displayName="GridLayout",GridLayout.__docgenInfo={description:"",displayName:"GridLayout",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/layouts/GridLayout/GridLayout.tsx#GridLayout"]={docgenInfo:GridLayout.__docgenInfo,name:"GridLayout",path:"src/layouts/GridLayout/GridLayout.tsx#GridLayout"})}catch(__react_docgen_typescript_loader_error){}},355:function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const React=__importStar(__webpack_require__(0)),clsx_1=__importDefault(__webpack_require__(11)),styles_1=__webpack_require__(41),theme_1=__importDefault(__webpack_require__(58)),Viewer_1=__webpack_require__(86);class SequenceLayout extends React.PureComponent{constructor(props){super(props),this._childViewers=[],this.state={selectedElementIdx:0}}_registerViewer(viewer,idx){this._childViewers[idx]=viewer}getHandle(){const{selectedElementIdx:selectedElementIdx}=this.state;return{elements:this._childViewers.map(viewer=>viewer.viewerId),selectedElementIdx:selectedElementIdx,doSelectElement:idx=>{this.setState({selectedElementIdx:idx})},doIncrementElement:(delta=1)=>{const{elements:elements}=this.props;this.setState(state=>{let elementIdx=state.selectedElementIdx+delta;return{selectedElementIdx:elementIdx=(elementIdx%elements.length+elements.length)%elements.length}})}}}componentDidUpdate(prevProps,prevState){const{viewerId:viewerId,emit:emit}=this.props.interactions,{selectedElementIdx:selectedElementIdx}=this.state;selectedElementIdx!==prevState.selectedElementIdx&&emit("Sequence.DidSelectElement",{viewerId:viewerId,selectedElementIdx:selectedElementIdx,prevSelectedElementIdx:prevState.selectedElementIdx})}render(){const{classes:classes,passdown:passdown,interactions:interactions,light:light}=this.props,{mouseHandlers:mouseHandlers}=interactions,{elements:elements,orientation:orientation,startMotif:startMotif,endMotif:endMotif}=this.props,{selectedElementIdx:selectedElementIdx}=this.state;return React.createElement("div",Object.assign({className:clsx_1.default({[classes.frame]:!0,[classes.frameLowlight]:"lowlight"===light,[classes.frameHighlight]:"highlight"===light,[classes.frameSelected]:"selected"===light})},mouseHandlers),React.createElement("div",{className:clsx_1.default({[classes.motif]:!0,[classes.horizontal]:"horizontal"===orientation,[classes.vertical]:"vertical"===orientation})},startMotif),elements.map((fragmentId,idx)=>React.createElement("div",{className:clsx_1.default({[classes.cell]:!0,[classes.spacing]:idx<elements.length-1,[classes.horizontal]:"horizontal"===orientation,[classes.vertical]:"vertical"===orientation}),key:idx},React.createElement("div",{className:classes.slot},React.createElement(Viewer_1.Viewer,Object.assign({ref:viewer=>this._registerViewer(viewer,idx),key:`${idx}-${fragmentId}`},passdown,{fragmentId:fragmentId}))),React.createElement("div",{className:classes.indices},idx))),React.createElement("div",{className:clsx_1.default({[classes.motif]:!0,[classes.horizontal]:"horizontal"===orientation,[classes.vertical]:"vertical"===orientation})},endMotif))}}SequenceLayout.defaultProps={orientation:"horizontal"};exports.default=styles_1.withStyles(theme=>styles_1.createStyles({frame:Object.assign({display:"inline-block",whiteSpace:"nowrap"},theme.vars.framed.normal),frameHighlight:Object.assign({},theme.vars.framed.highlight),frameLowlight:Object.assign({},theme.vars.framed.lowlight),frameSelected:Object.assign({},theme.vars.framed.selected),cell:{},slot:{paddingLeft:theme.vars.slot.padding,paddingRight:theme.vars.slot.padding},spacing:{marginRight:theme.vars.slot.spacing},motif:{},indices:Object.assign({borderTopColor:theme.vars.slot.borderColor,borderTopStyle:theme.vars.slot.borderStyle,borderTopWidth:theme.vars.slot.borderWidth,paddingLeft:theme.vars.slot.padding,paddingRight:theme.vars.slot.padding,textAlign:"left"},theme.vars.text.caption,{color:theme.vars.emphasis.less}),horizontal:{display:"inline-block"},vertical:{display:"block"},rootSelected:{borderColor:theme.palette.primary.light}}),{defaultTheme:theme_1.default})(SequenceLayout);try{SequenceLayout.displayName="SequenceLayout",SequenceLayout.__docgenInfo={description:"",displayName:"SequenceLayout",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/layouts/SequenceLayout/SequenceLayout.tsx#SequenceLayout"]={docgenInfo:SequenceLayout.__docgenInfo,name:"SequenceLayout",path:"src/layouts/SequenceLayout/SequenceLayout.tsx#SequenceLayout"})}catch(__react_docgen_typescript_loader_error){}},356:function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const React=__importStar(__webpack_require__(0)),clsx_1=__importDefault(__webpack_require__(11)),styles_1=__webpack_require__(41),theme_1=__importDefault(__webpack_require__(58)),Viewer_1=__webpack_require__(86);class KeyValueLayout extends React.PureComponent{constructor(props){super(props),this._childViewers=[],this.state={selectedEntryIdx:0,selectedEntryType:"key"}}_registerViewer(viewer,idx,type){this._childViewers[idx]||(this._childViewers[idx]={}),this._childViewers[idx][type]=viewer}getHandle(){const{selectedEntryIdx:selectedEntryIdx,selectedEntryType:selectedEntryType}=this.state;return{entries:this._childViewers.map(({key:key,value:value})=>({key:key.viewerId,value:value.viewerId})),selectedEntryIdx:selectedEntryIdx,selectedEntryType:selectedEntryType,doSelectEntry:idx=>{this.setState({selectedEntryIdx:idx})},doIncrementEntry:(delta=1)=>{const{entries:entries}=this.props;this.setState(state=>{let entryIdx=state.selectedEntryIdx+delta;return{selectedEntryIdx:entryIdx=(entryIdx%entries.length+entries.length)%entries.length}})},doSelectKey:()=>{this.setState({selectedEntryType:"key"})},doSelectValue:()=>{this.setState({selectedEntryType:"value"})}}}componentDidUpdate(prevProps,prevState){const{viewerId:viewerId,emit:emit}=this.props.interactions,{selectedEntryIdx:selectedEntryIdx,selectedEntryType:selectedEntryType}=this.state;selectedEntryIdx===prevState.selectedEntryIdx&&selectedEntryType===prevState.selectedEntryType||emit("KeyValue.DidSelectEntry",{viewerId:viewerId,selectedEntryIdx:selectedEntryIdx,selectedEntryType:selectedEntryType,prevSelectedEntryIdx:prevState.selectedEntryIdx,prevSelectedEntryType:prevState.selectedEntryType})}render(){const{classes:classes,passdown:passdown,interactions:interactions,light:light}=this.props,{mouseHandlers:mouseHandlers}=interactions,{entries:entries,separator:separator,startMotif:startMotif,endMotif:endMotif}=this.props,{selectedEntryIdx:selectedEntryIdx,selectedEntryType:selectedType}=this.state;return React.createElement("div",Object.assign({className:clsx_1.default({[classes.frame]:!0,[classes.frameLowlight]:"lowlight"===light,[classes.frameHighlight]:"highlight"===light,[classes.frameSelected]:"selected"===light})},mouseHandlers),React.createElement("div",{className:classes.motif},startMotif),entries.map(({key:key,value:value},idx)=>React.createElement("div",{className:clsx_1.default({[classes.entry]:!0,[classes.spacing]:idx<entries.length-1})},React.createElement("div",{className:classes.indices},idx),React.createElement("div",{className:classes.slot},React.createElement(Viewer_1.Viewer,Object.assign({ref:viewer=>this._registerViewer(viewer,idx,"key"),key:`k${idx}`},passdown,{fragmentId:key}))),React.createElement("span",{className:classes.separator},separator),React.createElement("div",{className:classes.slot},React.createElement(Viewer_1.Viewer,Object.assign({ref:viewer=>this._registerViewer(viewer,idx,"value"),key:`v${idx}`},passdown,{fragmentId:value}))))),React.createElement("div",{className:classes.motif},endMotif))}}KeyValueLayout.defaultProps={separator:":"};exports.default=styles_1.withStyles(theme=>styles_1.createStyles({frame:Object.assign({display:"inline-flex",flexDirection:"column",whiteSpace:"nowrap"},theme.vars.framed.normal),frameHighlight:Object.assign({},theme.vars.framed.highlight),frameLowlight:Object.assign({},theme.vars.framed.lowlight),frameSelected:Object.assign({},theme.vars.framed.selected),entry:{display:"flex",flexDirection:"row"},indices:Object.assign({display:"inline-block",borderRightColor:theme.vars.slot.borderColor,borderRightStyle:theme.vars.slot.borderStyle,borderRightWidth:theme.vars.slot.borderWidth,paddingRight:theme.vars.slot.padding,marginRight:theme.vars.slot.spacing,textAlign:"right"},theme.vars.text.caption,{color:theme.vars.emphasis.less}),spacing:{marginBottom:theme.vars.slot.padding},separator:{display:"inline-block",marginLeft:theme.vars.slot.spacing,marginRight:theme.vars.slot.spacing},slot:{display:"inline-block"},motif:{display:"block"}}),{defaultTheme:theme_1.default})(KeyValueLayout);try{KeyValueLayout.displayName="KeyValueLayout",KeyValueLayout.__docgenInfo={description:"",displayName:"KeyValueLayout",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/layouts/KeyValueLayout/KeyValueLayout.tsx#KeyValueLayout"]={docgenInfo:KeyValueLayout.__docgenInfo,name:"KeyValueLayout",path:"src/layouts/KeyValueLayout/KeyValueLayout.tsx#KeyValueLayout"})}catch(__react_docgen_typescript_loader_error){}},357:function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const React=__importStar(__webpack_require__(0)),styles_1=__webpack_require__(41),lodash_1=__importDefault(__webpack_require__(358)),theme_1=__importDefault(__webpack_require__(58)),Viewer_1=__webpack_require__(86),DagNode_1=__importDefault(__webpack_require__(854)),DagEdge_1=__importDefault(__webpack_require__(856)),layout_1=__importDefault(__webpack_require__(857)),data_utils_1=__webpack_require__(365),kNodeInitialWidth=1e5,kNodeResizeTolerance=5;class DagLayout extends React.Component{constructor(props){super(props),this._childViewers={},this.state={shouldLayout:!1,nodes:data_utils_1.obj2obj(this.props.nodes,(nodeId,node)=>[nodeId,{id:nodeId,children:node.children,flowDirection:node.flowDirection,alignChildren:node.alignChildren,ports:node.ports,width:kNodeInitialWidth,height:void 0,x:0,y:0,z:0}]),edges:data_utils_1.obj2obj(this.props.edges,(edgeId,edge)=>[edgeId,{id:edgeId,startId:edge.startId,endId:edge.endId,startPort:edge.startPort,endPort:edge.endPort}]),size:{width:0,height:0},ordering:[],expansion:data_utils_1.obj2obj(this.props.nodes,(nodeId,node)=>[nodeId,!0===node.isExpanded]),highlightedNodes:[],highlightedEdges:[],selectedNodeId:`${Object.keys(this.props.nodes)[0]}`}}_registerViewer(viewer,nodeId){this._childViewers[nodeId]=viewer}getHandle(){return{nodes:{},selectedNodeId:"herro",doSelectNode:nodeId=>{},doSelectNeighborNode:direction=>{}}}componentDidMount(){console.debug("DagLayout -- componentDidMount(): mounted")}shouldComponentUpdate(nextProps,nextState){return!0}componentDidUpdate(prevProps,prevState){console.log("DagLayout -- componentDidUpdate()");const{viewerId:viewerId,emit:emit}=this.props.interactions,{selectedNodeId:selectedNodeId}=this.state;selectedNodeId!==prevState.selectedNodeId&&emit("Dag.DidSelectNode",{viewerId:viewerId,selectedNodeId:selectedNodeId})}_onNodeResize(nodeId,width,height){console.log(`DagLayout -- _onNodeResize(${nodeId}, ${width}, ${height})`);const prevWidth=this.state.nodes[nodeId].width,prevHeight=this.state.nodes[nodeId].height;void 0!==prevWidth&&void 0!==prevHeight&&Math.abs(prevWidth-width)<kNodeResizeTolerance&&Math.abs(prevHeight-height)<kNodeResizeTolerance||this.setState(state=>lodash_1.default.merge({},state,{shouldLayout:!0,nodes:{[nodeId]:{width:width,height:height}}}))}_layoutGraph(){const{nodes:nodes,edges:edges}=this.state,{alignments:alignments,flowDirection:flowDirection,alignChildren:alignChildren}=this.props;layout_1.default(Object.values(nodes),Object.values(edges),(width,height,nodes,edges)=>{console.log("DagLayout -- _layoutGraph(): ELK callback triggered");const elements=[...nodes,...edges];elements.sort(({z:z1},{z:z2})=>z1-z2),this.setState(state=>({nodes:data_utils_1.arr2obj(nodes,node=>[node.id,node]),edges:data_utils_1.arr2obj(edges,edge=>[edge.id,edge]),ordering:elements.map(elem=>({type:"points"in elem?"edge":"node",id:elem.id})),size:{width:width,height:height},shouldLayout:!1}))},{alignments:alignments,flowDirection:flowDirection,alignChildren:alignChildren})}render(){const{classes:classes,passdown:passdown,interactions:interactions,light:light}=this.props,{mouseHandlers:mouseHandlers,viewerId:viewerId,emit:emit}=interactions,{ordering:ordering,size:size}=this.state;function buildArrowMarker(id,className){return React.createElement("marker",{key:id,id:id,viewBox:"0 0 10 10",refX:"6",refY:"5",markerUnits:"strokeWidth",markerWidth:"4",markerHeight:"4",orient:"auto"},React.createElement("path",{d:"M 0 0 L 10 5 L 0 10 L 4 5 z",className:className}))}function buildNodeMouseHandlers(nodeId){const message={viewerId:viewerId,nodeId:nodeId,nodeExpanded:!0,nodeViewerId:"herro"};return{onClick:e=>{e.stopPropagation(),emit("Dag.NodeDidClick",message)},onDoubleClick:e=>{e.stopPropagation(),emit("Dag.NodeDidDoubleClick",message)},onMouseOver:e=>{e.stopPropagation(),emit("Dag.NodeDidMouseOver",message)},onMouseOut:e=>{e.stopPropagation(),emit("Dag.NodeDidMouseOut",message)}}}function buildEdgeMouseHandlers(edgeId){const message={viewerId:viewerId,edgeId:edgeId};return{onClick:e=>{e.stopPropagation(),emit("Dag.EdgeDidClick",message)},onDoubleClick:e=>{e.stopPropagation(),emit("Dag.EdgeDidDoubleClick",message)},onMouseOver:e=>{e.stopPropagation(),emit("Dag.EdgeDidMouseOver",message)},onMouseOut:e=>{e.stopPropagation(),emit("Dag.EdgeDidMouseOut",message)}}}return console.log("DagLayout -- render(): ordering =",ordering,"state =",this.state),React.createElement("div",Object.assign({className:classes.frame},mouseHandlers),React.createElement("div",{className:classes.graph},React.createElement("svg",{width:size.width,height:size.height},React.createElement("defs",null,[buildArrowMarker("arrow-normal",classes.arrowNormal),buildArrowMarker("arrow-highlight",classes.arrowHighlight),buildArrowMarker("arrow-lowlight",classes.arrowLowlight),buildArrowMarker("arrow-selected",classes.arrowSelected)]),React.createElement("rect",{x:0,y:0,width:size.width,height:size.height,fill:"transparent",onClick:void 0}),ordering.map(elem=>{switch(elem.type){case"node":{const{id:id}=elem,{fragmentId:fragmentId,isInteractive:isInteractive,isVisible:isVisible}=this.props.nodes[id],{children:children,x:x,y:y,width:width,height:height}=this.state.nodes[id];return React.createElement(DagNode_1.default,{key:`n-${id}`,x:x,y:y,width:width,height:height,isExpanded:0!==children.length,isInteractive:!1!==isInteractive&&0!==this.props.nodes[id].children.length,isVisible:isVisible,isHighlighted:this.state.highlightedNodes.includes(id),onResize:(width,height)=>this._onNodeResize(id,width,height),mouseHandlers:buildNodeMouseHandlers(id)},React.createElement(Viewer_1.Viewer,Object.assign({ref:viewer=>this._registerViewer(viewer,id)},passdown,{fragmentId:fragmentId})))}case"edge":{const{id:id}=elem,{points:points}=this.state.edges[id];return React.createElement(DagEdge_1.default,{key:`e-${id}`,points:points,color:this.state.highlightedEdges.includes(id)?"highlight":"normal",mouseHandlers:buildEdgeMouseHandlers(id)})}default:return console.error("Got unrecognized graph element"),null}}))))}}exports.default=styles_1.withStyles(theme=>styles_1.createStyles({frame:{flex:1,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"stretch",overflow:"hidden"},graph:{flex:"auto",overflow:"auto",textAlign:"left"},arrowNormal:{fill:theme.color.blue.base},arrowHighlight:{fill:theme.color.blue.l1},arrowLowlight:{fill:theme.color.gray.d1},arrowSelected:{fill:theme.color.blue.d2}}),{defaultTheme:theme_1.default})(DagLayout);try{DagLayout.displayName="DagLayout",DagLayout.__docgenInfo={description:"",displayName:"DagLayout",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/layouts/DagLayout/DagLayout.tsx#DagLayout"]={docgenInfo:DagLayout.__docgenInfo,name:"DagLayout",path:"src/layouts/DagLayout/DagLayout.tsx#DagLayout"})}catch(__react_docgen_typescript_loader_error){}},365:function(module,exports,__webpack_require__){"use strict";function obj2obj(obj,transform){return pairs2obj(Object.entries(obj).map(([k,v],i)=>transform(k,v,i)).filter(pair=>void 0!==pair))}function obj2arr(obj,transform){return Object.entries(obj).map(([k,v],i)=>transform(k,v,i)).filter(elem=>void 0!==elem)}function arr2obj(arr,transform){return pairs2obj(arr.map((x,i)=>transform(x,i)).filter(pair=>void 0!==pair))}function pairs2obj(pairs){return pairs.reduce((obj,[k,v])=>(obj[k]=v,obj),{})}function range(start,end,step=1){void 0===end&&(end=start=0);const result=[];for(let i=start;i<end;i+=step)result.push(i);return result}Object.defineProperty(exports,"__esModule",{value:!0}),exports.obj2obj=obj2obj,exports.obj2arr=obj2arr,exports.arr2obj=arr2obj,exports.pairs2obj=pairs2obj,exports.range=range;try{obj2obj.displayName="obj2obj",obj2obj.__docgenInfo={description:"Utility functions to manipulate common data structures.\nTransform key-value pairs in an object into new key-value pairs, or `undefined` to omit.\n     let obj = { 1: 1, 2: 2, 3: 3 };\r\n     obj2obj(obj, (k, v, i) => [k, v * 2]);\r\n     >> { 1: 2, 2: 4, 3: 6 }",displayName:"obj2obj",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/data-utils.ts#obj2obj"]={docgenInfo:obj2obj.__docgenInfo,name:"obj2obj",path:"src/utils/data-utils.ts#obj2obj"})}catch(__react_docgen_typescript_loader_error){}try{obj2arr.displayName="obj2arr",obj2arr.__docgenInfo={description:"Transform key-value pairs in an object into elements of an array, or `undefined` to omit.\n     let obj = { 1: 4, 2: 3, 3: 2 };\r\n     obj2arr(obj, (k, v, i) => Number(k) + v);\r\n     >> [5, 5, 5]",displayName:"obj2arr",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/data-utils.ts#obj2arr"]={docgenInfo:obj2arr.__docgenInfo,name:"obj2arr",path:"src/utils/data-utils.ts#obj2arr"})}catch(__react_docgen_typescript_loader_error){}try{arr2obj.displayName="arr2obj",arr2obj.__docgenInfo={description:"Transform elements of an array into key-value pairs in an object, or `undefined` to omit.\n     let arr = [5, 4, 3];\r\n     arr2obj(arr, (x, i) => [String(x), i]);\r\n     >> { 5: 0, 4: 1, 3: 2 }",displayName:"arr2obj",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/data-utils.ts#arr2obj"]={docgenInfo:arr2obj.__docgenInfo,name:"arr2obj",path:"src/utils/data-utils.ts#arr2obj"})}catch(__react_docgen_typescript_loader_error){}try{pairs2obj.displayName="pairs2obj",pairs2obj.__docgenInfo={description:'Transform array of pairs into key-value pairs in an object.\n     let pairs = [["1", 1], ["2", 2]];\r\n     pairs2obj(pairs);\r\n     >> { 1: 1, 2: 2 }',displayName:"pairs2obj",props:{length:{defaultValue:null,description:"Gets or sets the length of the array. This is a number one higher than the highest element defined in an array.",name:"length",required:!0,type:{name:"number"}},toString:{defaultValue:null,description:"Returns a string representation of an array.",name:"toString",required:!0,type:{name:"() => string"}},toLocaleString:{defaultValue:null,description:"Returns a string representation of an array. The elements are converted to string using their toLocalString methods.",name:"toLocaleString",required:!0,type:{name:"() => string"}},pop:{defaultValue:null,description:"Removes the last element from an array and returns it.",name:"pop",required:!0,type:{name:"() => [string, T]"}},push:{defaultValue:null,description:"Appends new elements to an array, and returns the new length of the array.\n@param items New elements of the Array.",name:"push",required:!0,type:{name:"(...items: [string, T][]) => number"}},concat:{defaultValue:null,description:"Combines two or more arrays.\nCombines two or more arrays.\n@param items Additional items to add to the end of array1.\n@param items Additional items to add to the end of array1.",name:"concat",required:!0,type:{name:"{ (...items: ConcatArray<[string, T]>[]): [string, T][]; (...items: ([string, T] | ConcatArray<[string, T]>)[]): [string, T][]; }"}},join:{defaultValue:null,description:"Adds all the elements of an array separated by the specified separator string.\n@param separator A string used to separate one element of an array from the next in the resulting String. If omitted, the array elements are separated with a comma.",name:"join",required:!0,type:{name:"(separator?: string) => string"}},reverse:{defaultValue:null,description:"Reverses the elements in an Array.",name:"reverse",required:!0,type:{name:"() => [string, T][]"}},shift:{defaultValue:null,description:"Removes the first element from an array and returns it.",name:"shift",required:!0,type:{name:"() => [string, T]"}},slice:{defaultValue:null,description:"Returns a section of an array.\n@param start The beginning of the specified portion of the array.\n@param end The end of the specified portion of the array.",name:"slice",required:!0,type:{name:"(start?: number, end?: number) => [string, T][]"}},sort:{defaultValue:null,description:"Sorts an array.\n@param compareFn The name of the function used to determine the order of the elements. If omitted, the elements are sorted in ascending, ASCII character order.",name:"sort",required:!0,type:{name:"(compareFn?: (a: [string, T], b: [string, T]) => number) => [string, T][]"}},splice:{defaultValue:null,description:"Removes elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.\nRemoves elements from an array and, if necessary, inserts new elements in their place, returning the deleted elements.\n@param start The zero-based location in the array from which to start removing elements.\n@param deleteCount The number of elements to remove.\n@param start The zero-based location in the array from which to start removing elements.\n@param deleteCount The number of elements to remove.\n@param items Elements to insert into the array in place of the deleted elements.",name:"splice",required:!0,type:{name:"{ (start: number, deleteCount?: number): [string, T][]; (start: number, deleteCount: number, ...items: [string, T][]): [string, T][]; }"}},unshift:{defaultValue:null,description:"Inserts new elements at the start of an array.\n@param items Elements to insert at the start of the Array.",name:"unshift",required:!0,type:{name:"(...items: [string, T][]) => number"}},indexOf:{defaultValue:null,description:"Returns the index of the first occurrence of a value in an array.\n@param searchElement The value to locate in the array.\n@param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at index 0.",name:"indexOf",required:!0,type:{name:"(searchElement: [string, T], fromIndex?: number) => number"}},lastIndexOf:{defaultValue:null,description:"Returns the index of the last occurrence of a specified value in an array.\n@param searchElement The value to locate in the array.\n@param fromIndex The array index at which to begin the search. If fromIndex is omitted, the search starts at the last index in the array.",name:"lastIndexOf",required:!0,type:{name:"(searchElement: [string, T], fromIndex?: number) => number"}},every:{defaultValue:null,description:"Determines whether all the members of an array satisfy the specified test.\n@param callbackfn A function that accepts up to three arguments. The every method calls the callbackfn function for each element in array1 until the callbackfn returns false, or until the end of the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"every",required:!0,type:{name:"(callbackfn: (value: [string, T], index: number, array: [string, T][]) => unknown, thisArg?: any) => boolean"}},some:{defaultValue:null,description:"Determines whether the specified callback function returns true for any element of an array.\n@param callbackfn A function that accepts up to three arguments. The some method calls the callbackfn function for each element in array1 until the callbackfn returns true, or until the end of the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"some",required:!0,type:{name:"(callbackfn: (value: [string, T], index: number, array: [string, T][]) => unknown, thisArg?: any) => boolean"}},forEach:{defaultValue:null,description:"Performs the specified action for each element in an array.\n@param callbackfn A function that accepts up to three arguments. forEach calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"forEach",required:!0,type:{name:"(callbackfn: (value: [string, T], index: number, array: [string, T][]) => void, thisArg?: any) => void"}},map:{defaultValue:null,description:"Calls a defined callback function on each element of an array, and returns an array that contains the results.\n@param callbackfn A function that accepts up to three arguments. The map method calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"map",required:!0,type:{name:"<U>(callbackfn: (value: [string, T], index: number, array: [string, T][]) => U, thisArg?: any) => U[]"}},filter:{defaultValue:null,description:"Returns the elements of an array that meet the condition specified in a callback function.\nReturns the elements of an array that meet the condition specified in a callback function.\n@param callbackfn A function that accepts up to three arguments. The filter method calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.\n@param callbackfn A function that accepts up to three arguments. The filter method calls the callbackfn function one time for each element in the array.\n@param thisArg An object to which the this keyword can refer in the callbackfn function. If thisArg is omitted, undefined is used as the this value.",name:"filter",required:!0,type:{name:"{ <S extends [string, T]>(callbackfn: (value: [string, T], index: number, array: [string, T][]) => value is S, thisArg?: any): S[]; (callbackfn: (value: [string, T], index: number, array: [string, T][]) => unknown, thisArg?: any): [...][]; }"}},reduce:{defaultValue:null,description:"Calls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\nCalls the specified callback function for all the elements in an array. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\n@param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\n@param callbackfn A function that accepts up to four arguments. The reduce method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.",name:"reduce",required:!0,type:{name:"{ (callbackfn: (previousValue: [string, T], currentValue: [string, T], currentIndex: number, array: [string, T][]) => [string, T]): [string, T]; (callbackfn: (previousValue: [string, T], currentValue: [...], currentIndex: number, array: [...][]) => [...], initialValue: [...]): [...]; <U>(callbackfn: (previousValue: ..."}},reduceRight:{defaultValue:null,description:"Calls the specified callback function for all the elements in an array, in descending order. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\nCalls the specified callback function for all the elements in an array, in descending order. The return value of the callback function is the accumulated result, and is provided as an argument in the next call to the callback function.\n@param callbackfn A function that accepts up to four arguments. The reduceRight method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.\n@param callbackfn A function that accepts up to four arguments. The reduceRight method calls the callbackfn function one time for each element in the array.\n@param initialValue If initialValue is specified, it is used as the initial value to start the accumulation. The first call to the callbackfn function provides this value as an argument instead of an array value.",name:"reduceRight",required:!0,type:{name:"{ (callbackfn: (previousValue: [string, T], currentValue: [string, T], currentIndex: number, array: [string, T][]) => [string, T]): [string, T]; (callbackfn: (previousValue: [string, T], currentValue: [...], currentIndex: number, array: [...][]) => [...], initialValue: [...]): [...]; <U>(callbackfn: (previousValue: ..."}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/data-utils.ts#pairs2obj"]={docgenInfo:pairs2obj.__docgenInfo,name:"pairs2obj",path:"src/utils/data-utils.ts#pairs2obj"})}catch(__react_docgen_typescript_loader_error){}try{range.displayName="range",range.__docgenInfo={description:"@param start\n@param end\n@param step\n@returns     An array of numbers like Python's `range` function.",displayName:"range",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/utils/data-utils.ts#range"]={docgenInfo:range.__docgenInfo,name:"range",path:"src/utils/data-utils.ts#range"})}catch(__react_docgen_typescript_loader_error){}},366:function(module,exports,__webpack_require__){"use strict";function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}Object.defineProperty(exports,"__esModule",{value:!0}),__export(__webpack_require__(865)),__export(__webpack_require__(866));try{InteractionManager.displayName="InteractionManager",InteractionManager.__docgenInfo={description:"Configuration object used to define how user interactions should be handled by the `Viewer`s\nand/or the external application. This `InteractionManager` adopts a Pub/Sub model for attaching\r\nevent handlers to different topics (i.e. channels for messages). By using `ViewerSelector`s and \r\n`ViewerHandle`s, it is possible to target specific `Viewer`s to query and manipulate.",displayName:"InteractionManager",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/interaction/index.ts#InteractionManager"]={docgenInfo:InteractionManager.__docgenInfo,name:"InteractionManager",path:"src/interaction/index.ts#InteractionManager"})}catch(__react_docgen_typescript_loader_error){}},374:function(module,exports,__webpack_require__){__webpack_require__(375),__webpack_require__(479),module.exports=__webpack_require__(480)},45:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.FragmentAssembler=class FragmentAssembler{constructor(){this._meta={}}meta(key,value){return this._meta[key]=value,this}}},480:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0});const react_1=__webpack_require__(259),addon_info_1=__webpack_require__(635);react_1.addDecorator(addon_info_1.withInfo);const req=__webpack_require__(784);react_1.configure(function loadStories(){req.keys().forEach(req)},module)}).call(this,__webpack_require__(62)(module))},58:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const styles_1=__webpack_require__(41),themes_1=__webpack_require__(805),general={color:{gray:{l3:"#F8F9FA",l2:"#F1F3F5",l1:"#E9ECEE",base:"#DEE2E6",d1:"#B8C4CF",d2:"#8895A7",d3:"#5F6B7A"},blue:{l2:"#EFF8FF",l1:"#AAD4F6",base:"#3183C8",d1:"#2368A2",d2:"#194971"},teal:{l2:"#E7FFFE",l1:"#A8EEEC",base:"#3CAEA3",d1:"#2A9187",d2:"#1B655E"},green:{l2:"#E3FCEC",l1:"#A8EEC1",base:"#38C172",d1:"#249D57",d2:"#187741"},yellow:{l2:"#FFFCF4",l1:"#FDF3D7",base:"#F4CA64",d1:"#CAA53D",d2:"#8C6D1F"},red:{l2:"#FCE8E8",l1:"#F4AAAA",base:"#DC3030",d1:"#B82020",d2:"#881B1B"}},scale:value=>value},specific={vars:Object.assign({},themes_1.LightTheme)},builtin={typography:{h1:{fontWeight:300},h2:{fontWeight:400},h3:{fontWeight:400},h4:{fontWeight:500},h5:{fontWeight:500},h6:{fontWeight:500}},palette:{primary:{main:general.color.blue.base},secondary:{main:general.color.teal.base},error:{main:general.color.red.base}},shape:{borderRadius:2},spacing:4,overrides:{MuiIconButton:{root:{height:24,width:24,color:"inherit"}},MuiSvgIcon:{root:{fontSize:18}}}};exports.default=styles_1.createMuiTheme(Object.assign({},builtin,general,specific))},638:function(module,exports,__webpack_require__){var map={"./nestedObjectAssign":308,"./nestedObjectAssign.js":308};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=638},784:function(module,exports,__webpack_require__){var map={"./fragments.stories.tsx":785};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=784},785:function(module,exports,__webpack_require__){"use strict";(function(module){var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const react_1=__importDefault(__webpack_require__(0)),react_2=__webpack_require__(259),src_1=__webpack_require__(786),js_1=__webpack_require__(346),kTextSingleLong="Software visualization refers to the visualization of information of and related to software systems and their development process by means of static, interactive, or animated 2D or 3D visual representations of their structure, execution, behavior, and evolution.",kTextMultiWide="Software visualization refers to the visualization of information of and related to software\n    systems and their development process by means of static, interactive, or animated 2D or 3D\n    visual representations of their structure, execution, behavior, and evolution.",kTextMultiNarrow="Software\n    visualization\n    rocks!",kTextMultiNarrowDeep="The\n    quick\n    brown\n    fox\n    jumps\n    over\n    the\n    lazy\n    dog.";react_2.storiesOf("Text (Primitive)",module).add("single short",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Text("Vizstack")})).add("single long",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Text(kTextSingleLong)})).add("multi narrow",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Text(kTextMultiNarrow)})).add("multi wide",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Text(kTextMultiWide)})).add("variants",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Flow(js_1.Text("Vizstack","caption"),js_1.Text("Vizstack","body"),js_1.Text("Vizstack","subheading"),js_1.Text("Vizstack","heading"))})).add("emphasis",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Flow(js_1.Text("Vizstack",void 0,"less"),js_1.Text("Vizstack",void 0,"normal"),js_1.Text("Vizstack",void 0,"more"))})).add("interactive single short",()=>react_1.default.createElement(src_1.InteractionProvider,{manager:new src_1.InteractionManager},react_1.default.createElement(src_1.Viewer,{view:js_1.Text("Vizstack")}))).add("interactive multi narrow",()=>react_1.default.createElement(src_1.InteractionProvider,{manager:new src_1.InteractionManager},react_1.default.createElement(src_1.Viewer,{view:js_1.Text(kTextMultiNarrow)}))),react_2.storiesOf("Token (Primitive)",module).add("single short",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Token("Vizstack")})).add("single long",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Token(kTextSingleLong)})).add("multi narrow",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Token(kTextMultiNarrow)})).add("multi wide",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Token(kTextMultiWide)})).add("colors",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Flow(js_1.Token("Hello","gray"),js_1.Token("Hello","brown"),js_1.Token("Hello","purple"),js_1.Token("Hello","blue"),js_1.Token("Hello","green"),js_1.Token("Hello","yellow"),js_1.Token("Hello","orange"),js_1.Token("Hello","red"),js_1.Token("Hello","pink"))})).add("interactive single short",()=>react_1.default.createElement(src_1.InteractionProvider,{manager:new src_1.InteractionManager},react_1.default.createElement(src_1.Viewer,{view:js_1.Token("Vizstack")}))).add("interactive multi narrow",()=>react_1.default.createElement(src_1.InteractionProvider,{manager:new src_1.InteractionManager},react_1.default.createElement(src_1.Viewer,{view:js_1.Token(kTextMultiNarrow)}))),react_2.storiesOf("Icon (Primitive)",module).add("basic",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Flow(js_1.Icon("add_circle"),js_1.Icon("info"),js_1.Icon("label"),js_1.Icon("bookmark"),js_1.Icon("alarm"))})).add("emphasis",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Flow(js_1.Icon("add_circle","less"),js_1.Icon("add_circle","normal"),js_1.Icon("add_circle","more"))})).add("with text",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Flow(js_1.Icon("add_circle"),js_1.Text("Vizstack"))})),react_2.storiesOf("Flow (Layout)",module).add("inline inline inline",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Flow(js_1.Text("Vizstack"),js_1.Text(kTextMultiNarrow),js_1.Text("Vizstack"))})).add("inline block inline",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Flow(js_1.Text("Vizstack"),js_1.Token(kTextMultiNarrow),js_1.Text("Vizstack"))})).add("block inline block",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Flow(js_1.Token("Vizstack"),js_1.Text(kTextMultiNarrow),js_1.Token("Vizstack"))})).add("block block block",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Flow(js_1.Token("Vizstack"),js_1.Token(kTextMultiNarrow),js_1.Token("Vizstack"))})).add("interactive",()=>react_1.default.createElement(src_1.InteractionProvider,{manager:new src_1.InteractionManager},react_1.default.createElement(src_1.Viewer,{view:js_1.Flow(js_1.Text("Vizstack"),js_1.Token(kTextMultiNarrow),js_1.Text("Vizstack"))}))),react_2.storiesOf("Switch (Layout)",module).add("basic",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Switch(["foo","bar","baz"],{foo:js_1.Text("Software"),bar:js_1.Text("visualization"),baz:js_1.Text("rocks!")})})).add("interactive basic",()=>react_1.default.createElement(src_1.InteractionProvider,{manager:new src_1.InteractionManager},react_1.default.createElement(src_1.Viewer,{view:js_1.Switch(["foo","bar","baz"],{foo:js_1.Text("Software"),bar:js_1.Text("visualization"),baz:js_1.Text("rocks!")})}))).add("interactive with repeats",()=>react_1.default.createElement(src_1.InteractionProvider,{manager:new src_1.InteractionManager},react_1.default.createElement(src_1.Viewer,{view:js_1.Switch(["foo","bar","foo"],{foo:js_1.Text("Software"),bar:js_1.Text("visualization")})}))),react_2.storiesOf("Sequence (Layout)",module).add("basic",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Sequence([js_1.Text("Software"),js_1.Text("visualization"),js_1.Text("rocks!")])})).add("tall element",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Sequence([js_1.Text("Vizstack"),js_1.Text(kTextMultiNarrow),js_1.Text("Vizstack")])})).add("wide element",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Sequence([js_1.Text("Vizstack"),js_1.Text(kTextSingleLong),js_1.Text("Vizstack")])})).add("interactive",()=>react_1.default.createElement(src_1.InteractionProvider,{manager:new src_1.InteractionManager},react_1.default.createElement(src_1.Viewer,{view:js_1.Sequence([js_1.Text("Vizstack"),js_1.Text(kTextMultiNarrow),js_1.Text("Vizstack")])}))),react_2.storiesOf("Grid (Layout)",module).add("basic",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Grid("AAB\n                 CDD",{A:js_1.Text("Vizstack"),B:js_1.Text("B"),C:js_1.Text("C"),D:js_1.Text("Vizstack")})})).add("wide element",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Grid("AAB\n                 CDD\n                 EFG",{A:js_1.Text("Vizstack"),B:js_1.Text("B"),C:js_1.Text("Vizstack"),D:js_1.Text("Vizstack"),E:js_1.Text("E"),F:js_1.Text("F"),G:js_1.Text("G")})})).add("tall element",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Grid("AAB\n                 CDD\n                 EFG",{A:js_1.Text("Vizstack"),B:js_1.Text("B"),C:js_1.Text(kTextMultiNarrow),D:js_1.Text("Vizstack"),E:js_1.Text("E"),F:js_1.Text("F"),G:js_1.Text("G")})})).add("tall element tall cell",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Grid("AAB\n                 CDD\n                 CFG",{A:js_1.Text("Vizstack"),B:js_1.Text("B"),C:js_1.Text(kTextMultiNarrow),D:js_1.Text("Vizstack"),F:js_1.Text("F"),G:js_1.Text("G")})})).add("empty cells",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.Grid("A.B\n                 C.D",{A:js_1.Text("A"),B:js_1.Text("B"),C:js_1.Text("C"),D:js_1.Text("D")})})).add("interactive",()=>react_1.default.createElement(src_1.InteractionProvider,{manager:new src_1.InteractionManager},react_1.default.createElement(src_1.Viewer,{view:js_1.Grid("AAAB\n                     .CCB",{A:js_1.Text("Vizstack"),B:js_1.Text(kTextMultiNarrow),C:js_1.Text("Vizstack")})}))),react_2.storiesOf("KeyValue (Layout)",module).add("basic",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.KeyValue([{key:js_1.Text("Egg yolks"),value:js_1.Text("6 yolks")},{key:js_1.Text("White sugar"),value:js_1.Text("6 tbsp")},{key:js_1.Text("Heavy cream"),value:js_1.Text("2 1/2 cups")},{key:js_1.Text("Vanilla extract"),value:js_1.Text("1/2 tsp")}])})).add("long list",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.KeyValue([{key:js_1.Text("First day"),value:js_1.Text("A partridge in a pear tree")},{key:js_1.Text("Second day"),value:js_1.Text("Two turtle doves")},{key:js_1.Text("Third day"),value:js_1.Text("Three French hens")},{key:js_1.Text("Fourth day"),value:js_1.Text("Four calling birds")},{key:js_1.Text("Fifth day"),value:js_1.Text("Five golden rings")},{key:js_1.Text("Sixth day"),value:js_1.Text("Six geese a-laying")},{key:js_1.Text("Seventh day"),value:js_1.Text("Seven swans a-swimming")},{key:js_1.Text("Eighth day"),value:js_1.Text("Eight maids a-milking")},{key:js_1.Text("Ninth day"),value:js_1.Text("Nine ladies dancing")},{key:js_1.Text("Tenth day"),value:js_1.Text("Ten lords a-leaping")},{key:js_1.Text("Eleventh day"),value:js_1.Text("Eleven pipers piping")},{key:js_1.Text("Twelfth day"),value:js_1.Text("Twelve drummers drumming")}])})).add("wide key",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.KeyValue([{key:js_1.Text("One"),value:js_1.Text("Uno")},{key:js_1.Text(kTextSingleLong),value:js_1.Text("Dos")},{key:js_1.Text("Three"),value:js_1.Text("Tres")}])})).add("wide value",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.KeyValue([{key:js_1.Text("One"),value:js_1.Text("Uno")},{key:js_1.Text("Two"),value:js_1.Text(kTextSingleLong)},{key:js_1.Text("Three"),value:js_1.Text("Tres")}])})).add("tall key",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.KeyValue([{key:js_1.Text("One"),value:js_1.Text("Uno")},{key:js_1.Text(kTextMultiNarrowDeep),value:js_1.Text("Dos")},{key:js_1.Text("Three"),value:js_1.Text("Tres")}])})).add("tall value",()=>react_1.default.createElement(src_1.Viewer,{view:js_1.KeyValue([{key:js_1.Text("One"),value:js_1.Text("Uno")},{key:js_1.Text("Two"),value:js_1.Text(kTextMultiNarrowDeep)},{key:js_1.Text("Three"),value:js_1.Text("Tres")}])})).add("interactive",()=>react_1.default.createElement(src_1.InteractionProvider,{manager:new src_1.InteractionManager},react_1.default.createElement(src_1.Viewer,{view:js_1.KeyValue([{key:js_1.Text("Egg yolks"),value:js_1.Text("6 yolks")},{key:js_1.Text("White sugar"),value:js_1.Text("6 tbsp")},{key:js_1.Text("Heavy cream"),value:js_1.Text("2 1/2 cups")},{key:js_1.Text("Vanilla extract"),value:js_1.Text("1/2 tsp")}])})))}).call(this,__webpack_require__(62)(module))},786:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Viewer_1=__webpack_require__(86);exports.Viewer=Viewer_1.ViewerRoot;var interaction_1=__webpack_require__(366);exports.InteractionProvider=interaction_1.InteractionProvider,exports.InteractionManager=interaction_1.InteractionManager;try{InteractionManager.displayName="InteractionManager",InteractionManager.__docgenInfo={description:"Configuration object used to define how user interactions should be handled by the `Viewer`s\nand/or the external application. This `InteractionManager` adopts a Pub/Sub model for attaching\r\nevent handlers to different topics (i.e. channels for messages). By using `ViewerSelector`s and \r\n`ViewerHandle`s, it is possible to target specific `Viewer`s to query and manipulate.",displayName:"InteractionManager",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/index.ts#InteractionManager"]={docgenInfo:InteractionManager.__docgenInfo,name:"InteractionManager",path:"src/index.ts#InteractionManager"})}catch(__react_docgen_typescript_loader_error){}},789:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const js_md5_1=__importDefault(__webpack_require__(790)),fragment_assembler_1=__webpack_require__(45),lang_1=__webpack_require__(792);class ViewAssembler{constructor(getFragmentId){getFragmentId&&(this._getFragmentId=getFragmentId)}_getFragmentAssembler(obj){return obj instanceof fragment_assembler_1.FragmentAssembler?obj:obj===Object(obj)&&"__view__"in obj?obj.__view__():lang_1.getLanguageDefault(obj)}_getFragmentId(name,parentId){return js_md5_1.default.base64(`${parentId}-${name}`).slice(0,10)}assemble(obj){const rootId=ViewAssembler._kRootId,assigned=new Map([[obj,rootId]]),fragments={[rootId]:null},queue=[obj];for(;queue.length>0;){const curr=queue.shift(),fragId=assigned.get(curr);if(!fragId)throw new Error(`Object returned as ref was not assigned a FragmentId: ${JSON.stringify(curr)}`);if(null!==fragments[fragId])continue;const fasm=this._getFragmentAssembler(curr),[frag,refs]=fasm.assemble((obj,name)=>{const existingId=assigned.get(obj);if(existingId)return existingId;const createdId=this._getFragmentId(name,fragId);return assigned.set(obj,createdId),fragments[createdId]=null,createdId});fragments[fragId]=frag,queue.push(...refs)}return Object.entries(fragments).forEach(([id,frag])=>{if(!frag)throw new Error(`Object assigned a FragmentId was not returned as a ref: ${id}`)}),{rootId:rootId,fragments:fragments}}}ViewAssembler._kRootId="root",exports.assemble=function assemble(obj,getFragmentId){return new ViewAssembler(getFragmentId).assemble(obj)}},792:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const json5_1=__importDefault(__webpack_require__(793)),assemblers_1=__webpack_require__(347);exports.getLanguageDefault=function getLanguageDefault(obj){if(obj!==Object(obj))return assemblers_1.Token("string"==typeof obj?`"${obj}"`:`${obj}`);if(Array.isArray(obj))return SwitchSequence(obj,`Array[${obj.length}]`,`Array[${obj.length}] [`,"]");if(obj instanceof Set)return SwitchSequence(Array.from(obj),`Set[${obj.size}]`,`Set[${obj.size}] {`,"}");if(obj instanceof Map)return SwitchKeyValue(Array.from(obj.entries()).map(([key,value])=>({key:key,value:value})),`Map[${obj.size}]`,`Map[${obj.size}] {`,"}");if("function"==typeof obj){const{args:args,defaults:defaults}=function getFunctionArgs(func){const params=(func+"").replace(/[\/][\/].*$/gm,"").replace(/\s+/g,"").replace(/[\/][*][^\/*]*[*][\/]/g,"").split("){",1)[0].split(")=>")[0].replace(/^[^(]*[(]/,"").split(",").filter(Boolean);return{args:params.map(param=>param.split("=")[0]),defaults:params.map(param=>{let value=param.split("=").length>1?param.split("=")[1]:void 0;try{value&&(value=json5_1.default.parse(value))}catch(error){}return value})}}(obj);return SwitchKeyValue(args.map((arg,idx)=>({key:arg,value:defaults[idx]})),obj.name?`Function[${obj.name}]`:"Function",obj.name?`Function[${obj.name}] (`:"Function (",")")}return SwitchKeyValue(Object.entries(obj).map(([key,value])=>({key:key,value:value})),`Object[${Object.keys(obj).length}]`,`Object[${Object.keys(obj).length}] {`,"}")};const kCompactNum=5;function SwitchSequence(elements,summary,startMotif,endMotif){const fullMode=assemblers_1.Sequence(elements,"horizontal",startMotif,endMotif),compactMode=assemblers_1.Sequence(elements.slice(0,kCompactNum),"horizontal",startMotif,"... "+endMotif),summaryMode=summary;return elements.length<=kCompactNum?assemblers_1.Switch(["full","summary"],{full:fullMode,summary:summaryMode}):assemblers_1.Switch(["full","summary","compact"],{full:fullMode,summary:summaryMode,compact:compactMode})}function SwitchKeyValue(entries,summary,startMotif,endMotif){const fullMode=assemblers_1.KeyValue(entries,":",startMotif,endMotif),compactMode=assemblers_1.KeyValue(entries.slice(0,kCompactNum),":",startMotif,"... "+endMotif),summaryMode=summary;return entries.length<=kCompactNum?assemblers_1.Switch(["full","summary"],{full:fullMode,summary:summaryMode}):assemblers_1.Switch(["full","summary","compact"],{full:fullMode,summary:summaryMode,compact:compactMode})}},794:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const fragment_assembler_1=__webpack_require__(45),lodash_1=__importDefault(__webpack_require__(219)),kNoneSpecified=Symbol();class DagLayoutFragmentAssembler extends fragment_assembler_1.FragmentAssembler{constructor(flowDirection,alignChildren){super(),this._nodes={},this._children={},this._parents={},this._alignments=[],this._edges=[],this._items={},this._flowDirection=flowDirection,this._alignChildren=alignChildren}node(name,config={},item=kNoneSpecified){this._nodes[name]||(this._nodes[name]={});const{parent:parent,alignWith:alignWith}=config;if(void 0!==parent){if(this._parents[name]){const idx=this._children[this._parents[name]].indexOf(name);this._children[this._parents[name]].splice(idx)}null===parent?delete this._parents[name]:(this._parents[name]=parent,this._children[parent]||(this._children[parent]=[]),this._children[parent].push(name))}return alignWith&&("string"==typeof alignWith?this._alignments.push([name,alignWith]):Array.isArray&&this._alignments.push([name,...alignWith])),delete config.parent,delete config.alignWith,lodash_1.default.merge(this._nodes[name],config),item!==kNoneSpecified&&(this._items[name]=item),this}port(nodeName,portName,side,order){const node=this._nodes[nodeName];return node.ports||(node.ports={}),node.ports[portName]=lodash_1.default.merge(node.ports[portName],Object.assign({},side&&{side:side},order&&{order:order})),this}edge(startNode,endNode,startPort,endPort){const edge=Object.assign({startId:startNode,endId:endNode},startPort&&{startPort:startPort},endPort&&{endPort:endPort});return this._edges.push(edge),this}item(nodeName,item=kNoneSpecified){return this._items[nodeName]=item,this}assemble(getId){return lodash_1.default.keys(this._nodes).forEach(name=>{if(!(name in this._items))throw new Error(`Node with no item: ${name}`)}),this._edges.forEach(({startId:startId,endId:endId,startPort:startPort,endPort:endPort},idx)=>{if(!(startId in this._nodes))throw new Error(`Edge starts at unknown node: ${startId}`);if(startPort){const startPorts=this._nodes[startId].ports;if(!(startPorts&&startPort in startPorts))throw new Error(`Edge starts at unknown port: ${startPort} (node ${startId})`)}if(!(endId in this._nodes))throw new Error(`Edge ends at unknown node: ${endId}`);if(endPort){const endPorts=this._nodes[endId].ports;if(!(endPorts&&endPort in endPorts))throw new Error(`Edge ends at unknown port: ${endPort} (node ${endId})`)}}),[{type:"DagLayout",contents:{nodes:lodash_1.default.mapValues(this._nodes,(node,name)=>Object.assign({fragmentId:getId(this._items[name],`n${name}`),children:this._children[name]||[]},node)),edges:lodash_1.default.mapKeys(this._edges,(edge,idx)=>`e${idx}`),alignments:this._alignments,flowDirection:this._flowDirection,alignChildren:this._alignChildren},meta:this._meta},Object.keys(this._nodes).map(name=>this._items[name])]}}exports.Dag=function Dag(flowDirection,alignChildren){return new DagLayoutFragmentAssembler(flowDirection,alignChildren)}},795:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const fragment_assembler_1=__webpack_require__(45);class FlowLayoutFragmentAssembler extends fragment_assembler_1.FragmentAssembler{constructor(...elements){super(),this._elements=elements}items(...items){return this._elements.push(...items),this}assemble(getId){return[{type:"FlowLayout",contents:{elements:this._elements.map((elem,idx)=>getId(elem,`${idx}`))},meta:this._meta},this._elements]}}exports.Flow=function Flow(...elements){return new FlowLayoutFragmentAssembler(...elements)}},796:function(module,exports,__webpack_require__){"use strict";var __rest=this&&this.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const fragment_assembler_1=__webpack_require__(45),lodash_1=__importDefault(__webpack_require__(219));function withinBounds(bounds,row,col){const{r:r,c:c,R:R,C:C}=bounds;return r<=row&&row<=R&&c<=col&&col<=C}function parseGridString(str){const rows=str.split("\n").map(row=>row.replace(/\s/g,"")).filter(row=>row.length>0);if(!rows||!rows.every(row=>row.length===rows[0].length))throw new Error(`Specification string must be rectangular in shape, got rows: ${rows}`);const grid=rows.map(row=>row.split("")),bounds={};for(let r=0;r<grid.length;r++)for(let c=0;c<grid[0].length;c++){const char=grid[r][c];if(char in bounds){if(withinBounds(bounds[char],r,c))continue;throw new Error(`Specification string malformed for cell: ${char}`)}{if("."===char)continue;let R=r,C=c;for(;C+1<grid[0].length&&grid[r][C+1]===char;)C++;for(;R+1<grid.length&&lodash_1.default.range(c,C+1).every(idx=>grid[R+1][idx]===char);)R++;bounds[char]={r:r,c:c,R:R,C:C}}}return lodash_1.default.mapValues(bounds,({r:r,c:c,R:R,C:C})=>({row:r,col:c,height:R-r+1,width:C-c+1}))}exports.withinBounds=withinBounds,exports.parseGridString=parseGridString;class GridLayoutFragmentAssembler extends fragment_assembler_1.FragmentAssembler{constructor(cells,items){if(super(),this._cells={},this._items={},cells)if("string"==typeof cells)this._cells=parseGridString(cells);else{if(!Array.isArray(cells))throw new Error(`Unknown format recieved for cells: ${cells}`);cells.forEach(_a=>{var{name:name}=_a,cell=__rest(_a,["name"]);return this._cells[name]=cell})}items&&(this._items=items)}cell(name,row,col,height,width){return this._cells[name]={row:row,col:col,height:height,width:width},this}item(name,item){return this._items[name]=item,this}assemble(getId){return lodash_1.default.keys(this._cells).forEach(name=>{if(!(name in this._items))throw new Error(`Cell with no item: ${name}`)}),[{type:"GridLayout",contents:{cells:lodash_1.default.entries(this._cells).map(([name,cell])=>Object.assign({fragmentId:getId(this._items[name],name)},cell))},meta:this._meta},Object.keys(this._cells).map(name=>this._items[name])]}}exports.Grid=function Grid(cells,items){return new GridLayoutFragmentAssembler(cells,items)}},797:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const fragment_assembler_1=__webpack_require__(45);class IconPrimitiveFragmentAssembler extends fragment_assembler_1.FragmentAssembler{constructor(name,emphasis){super(),this._name=name,this._emphasis=emphasis}assemble(getId){return[{type:"IconPrimitive",contents:{name:this._name,emphasis:this._emphasis},meta:this._meta},[]]}}exports.Icon=function Icon(name,emphasis){return new IconPrimitiveFragmentAssembler(name,emphasis)}},798:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const fragment_assembler_1=__webpack_require__(45);class ImagePrimitiveFragmentAssembler extends fragment_assembler_1.FragmentAssembler{constructor(location){super(),this._location=location}assemble(getId){return[{type:"ImagePrimitive",contents:{location:this._location},meta:this._meta},[]]}}exports.Image=function Image(location){return new ImagePrimitiveFragmentAssembler(location)}},799:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const fragment_assembler_1=__webpack_require__(45),lodash_1=__importDefault(__webpack_require__(219));class KeyValueLayoutFragmentAssembler extends fragment_assembler_1.FragmentAssembler{constructor(entries,separator,startMotif,endMotif){super(),this._entries=[],entries&&(this._entries=entries),this._separator=separator,this._startMotif=startMotif,this._endMotif=endMotif}item(key,value){return this._entries.push({key:key,value:value}),this}assemble(getId){return[{type:"KeyValueLayout",contents:{entries:this._entries.map(({key:key,value:value},idx)=>({key:getId(key,`${idx}k`),value:getId(value,`${idx}v`)})),separator:this._separator,startMotif:this._startMotif,endMotif:this._endMotif},meta:this._meta},lodash_1.default.flatMap(this._entries,({key:key,value:value})=>[key,value])]}}exports.KeyValue=function KeyValue(entries,separator,startMotif,endMotif){return new KeyValueLayoutFragmentAssembler(entries,separator,startMotif,endMotif)}},800:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const fragment_assembler_1=__webpack_require__(45);class SequenceLayoutFragmentAssembler extends fragment_assembler_1.FragmentAssembler{constructor(elements,orientation,startMotif,endMotif){super(),this._elements=[],elements&&(this._elements=elements),this._orientation=orientation,this._startMotif=startMotif,this._endMotif=endMotif}item(item){return this._elements.push(item),this}items(...items){return this._elements.push(...items),this}assemble(getId){return[{type:"SequenceLayout",contents:{elements:this._elements.map((elem,idx)=>getId(elem,`${idx}`)),orientation:this._orientation,startMotif:this._startMotif,endMotif:this._endMotif},meta:this._meta},this._elements]}}exports.Sequence=function Sequence(elements,orientation,startMotif,endMotif){return new SequenceLayoutFragmentAssembler(elements,orientation,startMotif,endMotif)}},801:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const fragment_assembler_1=__webpack_require__(45),kNoneSpecified=Symbol();class SwitchLayoutFragmentAssembler extends fragment_assembler_1.FragmentAssembler{constructor(modes,items){super(),this._modes=[],this._items={},modes&&(this._modes=modes),items&&(this._items=items)}mode(name,item=kNoneSpecified){return this._modes.push(name),item!==kNoneSpecified&&(this._items[name]=item),this}item(name,item){return this._items[name]=item,this}assemble(getId){return this._modes.forEach(name=>{if(!(name in this._items))throw new Error(`Mode with no item: ${name}`)}),[{type:"SwitchLayout",contents:{modes:this._modes.map(name=>getId(this._items[name],`${name}`))},meta:this._meta},this._modes.map(name=>this._items[name])]}}exports.Switch=function Switch(modes,items){return new SwitchLayoutFragmentAssembler(modes,items)}},802:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const fragment_assembler_1=__webpack_require__(45);class TextPrimitiveFragmentAssembler extends fragment_assembler_1.FragmentAssembler{constructor(text,variant,emphasis){super(),this._text=text,this._variant=variant,this._emphasis=emphasis}assemble(getId){return[{type:"TextPrimitive",contents:{text:this._text,variant:this._variant,emphasis:this._emphasis},meta:this._meta},[]]}}exports.Text=function Text(text,variant,emphasis){return new TextPrimitiveFragmentAssembler(text,variant,emphasis)}},803:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const fragment_assembler_1=__webpack_require__(45);class TokenPrimitiveFragmentAssembler extends fragment_assembler_1.FragmentAssembler{constructor(text,color){super(),this._text=text,this._color=color}assemble(getId){return[{type:"TokenPrimitive",contents:{text:this._text,color:this._color},meta:this._meta},[]]}}exports.Token=function Token(text,color){return new TokenPrimitiveFragmentAssembler(text,color)}},804:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var TextPrimitive_1=__webpack_require__(348);exports.default=TextPrimitive_1.default,function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(348))},805:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var light_1=__webpack_require__(806);exports.LightTheme=light_1.default},806:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),__webpack_require__(807),__webpack_require__(829);const fonts_RobotoMono='"Roboto Mono", monospace',fonts_UbuntuMono='"Ubuntu Mono", monospace';exports.default={framed:{normal:{backgroundColor:"transparent",border:"1.25px solid rgb(237, 237, 236)",borderLeftWidth:"3px",borderRadius:"0 0 8px 0",padding:"4px 4px"},lowlight:{},highlight:{backgroundColor:"rgb(245, 251, 254)",borderLeftColor:"rgb(30, 167, 253)"},selected:{borderLeftColor:"rgb(2, 122, 197)"}},unframed:{normal:{backgroundColor:"transparent",borderStyle:"solid",borderWidth:"3px",borderColor:"transparent"},lowlight:{},highlight:{borderColor:"rgb(30, 167, 253)"},selected:{borderColor:"rgb(2, 122, 197)"}},slot:{borderStyle:"solid",borderWidth:2,borderColor:"rgb(237, 237, 236)",padding:4,spacing:8},emphasis:{normal:"rgb(55, 53, 47)",less:"rgb(153, 153, 153)",more:"rgb(6, 156, 205)"},fills:{gray:"rgb(230,230,228)",brown:"rgb(232,213,205)",purple:"rgb(225,213,249)",blue:"rgb(207,229,249)",green:"rgb(206,231,225)",yellow:"rgb(250,237,211)",orange:"rgb(254,223,209)",red:"rgb(255,207,212)",pink:"rgb(249,207,230)"},text:{caption:{fontFamily:fonts_UbuntuMono,fontSize:10,fontWeight:300},body:{fontFamily:fonts_UbuntuMono,fontSize:14,fontWeight:300},subheading:{fontFamily:fonts_UbuntuMono,fontSize:14,fontWeight:600},heading:{fontFamily:fonts_UbuntuMono,fontSize:20,fontWeight:600}},icon:{fontSize:18},code:{body:{fontFamily:fonts_RobotoMono,fontSize:12}}}},839:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var TokenPrimitive_1=__webpack_require__(349);exports.default=TokenPrimitive_1.default,function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(349))},840:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var IconPrimitive_1=__webpack_require__(350);exports.default=IconPrimitive_1.default,function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(350))},847:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ImagePrimitive_1=__webpack_require__(351);exports.default=ImagePrimitive_1.default,function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(351))},848:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var FlowLayout_1=__webpack_require__(352);exports.default=FlowLayout_1.default,function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(352))},849:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var SwitchLayout_1=__webpack_require__(353);exports.default=SwitchLayout_1.default,function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(353))},850:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var GridLayout_1=__webpack_require__(354);exports.default=GridLayout_1.default,function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(354))},851:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var SequenceLayout_1=__webpack_require__(355);exports.default=SequenceLayout_1.default,function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(355))},852:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var KeyValueLayout_1=__webpack_require__(356);exports.default=KeyValueLayout_1.default,function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(356))},853:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var DagLayout_1=__webpack_require__(357);exports.default=DagLayout_1.default,function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(357))},854:function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const React=__importStar(__webpack_require__(0)),clsx_1=__importDefault(__webpack_require__(11)),styles_1=__webpack_require__(41),react_measure_1=__importDefault(__webpack_require__(855)),kBorderWidth=8;class DagNode extends React.PureComponent{render(){const{classes:classes,x:x,y:y,width:width,height:height,children:children,isVisible:isVisible,isInteractive:isInteractive,isHighlighted:isHighlighted,isExpanded:isExpanded,mouseHandlers:mouseHandlers,onResize:onResize}=this.props;if(isExpanded)return React.createElement("rect",Object.assign({x:x,y:y,width:width,height:height,className:clsx_1.default({[classes.nodeInvisible]:!1===isVisible,[classes.nodeExpanded]:!1!==isVisible,[classes.nodeHighlighted]:!1!==isVisible&&isHighlighted})},mouseHandlers));const foreignObjectPos=isInteractive?{x:x+kBorderWidth,y:y+kBorderWidth,width:width-2*kBorderWidth,height:height-2*kBorderWidth}:{x:x,y:y,width:width,height:height};return React.createElement("g",null,isInteractive?React.createElement("rect",Object.assign({x:x,y:y,width:width,height:height,stroke:"black",strokeOpacity:isHighlighted?.4:.2,strokeWidth:kBorderWidth,fill:"none"},mouseHandlers)):null,React.createElement("foreignObject",Object.assign({},foreignObjectPos,{className:clsx_1.default({[classes.node]:!0})}),React.createElement(react_measure_1.default,{bounds:!0,onResize:contentRect=>{const bounds=contentRect.bounds;if(bounds)return isInteractive?onResize(bounds.width+2*kBorderWidth,bounds.height+2*kBorderWidth):onResize(bounds.width,bounds.height)}},({measureRef:measureRef})=>React.createElement("div",{ref:measureRef,style:{display:"inline-block"}},children))))}}DagNode.defaultProps={isInteractive:!0,isVisible:!0};exports.default=styles_1.withStyles(theme=>styles_1.createStyles({node:{},nodeInvisible:{fill:"#FFFFFF",fillOpacity:.1},nodeExpanded:{fill:"#000000",fillOpacity:.1},nodeHighlighted:{fillOpacity:.2}}))(DagNode);try{DagNode.displayName="DagNode",DagNode.__docgenInfo={description:"",displayName:"DagNode",props:{children:{defaultValue:null,description:"React components within opening & closing tags.",name:"children",required:!1,type:{name:"ReactNode"}},x:{defaultValue:null,description:"Position and size properties.",name:"x",required:!0,type:{name:"number"}},y:{defaultValue:null,description:"",name:"y",required:!0,type:{name:"number"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},isExpanded:{defaultValue:null,description:"Expansion state.",name:"isExpanded",required:!0,type:{name:"boolean"}},isInteractive:{defaultValue:null,description:"",name:"isInteractive",required:!1,type:{name:"boolean"}},isVisible:{defaultValue:null,description:"",name:"isVisible",required:!1,type:{name:"boolean"}},mouseHandlers:{defaultValue:null,description:"Mouse event handlers which should be spread on the interactive region of the node.",name:"mouseHandlers",required:!0,type:{name:"{ onClick?: (e: SyntheticEvent<Element, Event>) => void; onDoubleClick?: (e: SyntheticEvent<Element, Event>) => void; onMouseOver?: (e: SyntheticEvent<Element, Event>) => void; onMouseOut?: (e: SyntheticEvent<...>) => void; }"}},isHighlighted:{defaultValue:null,description:"Whether the node should highlight if expanded and not invisible.",name:"isHighlighted",required:!0,type:{name:"boolean"}},onResize:{defaultValue:null,description:"Callback on component resize.",name:"onResize",required:!0,type:{name:"(width: number, height: number) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/layouts/DagLayout/DagNode.tsx#DagNode"]={docgenInfo:DagNode.__docgenInfo,name:"DagNode",path:"src/layouts/DagLayout/DagNode.tsx#DagNode"})}catch(__react_docgen_typescript_loader_error){}},856:function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result},__importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const React=__importStar(__webpack_require__(0)),clsx_1=__importDefault(__webpack_require__(11)),styles_1=__webpack_require__(41),cuid_1=__importDefault(__webpack_require__(344)),d3_1=__webpack_require__(867);class DagEdge extends React.PureComponent{constructor(){super(...arguments),this._xlinkId=cuid_1.default()}render(){const{classes:classes,points:points,shape:shape,color:color,label:label,mouseHandlers:mouseHandlers}=this.props;if(!points)return null;let path=void 0;switch(shape){case"curve":path=d3_1.line().curve(d3_1.curveBasis)(points.map(p=>[p.x,p.y]));break;case"line":default:path=d3_1.line().curve(d3_1.curveLinear)(points.map(p=>[p.x,p.y]))}return React.createElement("g",null,React.createElement("path",Object.assign({d:path||void 0,className:clsx_1.default({[classes.hotspot]:!0})},mouseHandlers)),React.createElement("path",{id:this._xlinkId,d:path||void 0,pointerEvents:"none",className:clsx_1.default({[classes.edge]:!0,[classes.edgeHighlight]:"highlight"===color,[classes.edgeLowlight]:"lowlight"===color,[classes.edgeSelected]:"selected"===color})}),React.createElement("text",{dy:"-1.5",textAnchor:"end",pointerEvents:"none",className:clsx_1.default({[classes.edgeLabel]:!0,[classes.edgeLabelHighlight]:"highlight"===color,[classes.edgeLabelLowlight]:"lowlight"===color,[classes.edgeLabelSelected]:"selected"===color})},React.createElement("textPath",{xlinkHref:`#${this._xlinkId}`,startOffset:"95%"},label)))}}DagEdge.defaultProps={points:[],shape:"line",color:"normal"};exports.default=styles_1.withStyles(theme=>styles_1.createStyles({edge:{fill:"none",strokeWidth:2.5,opacity:1,markerEnd:"url(#arrow-normal)"},hotspot:{fill:"none",stroke:"transparent",strokeWidth:12},edgeHighlight:{strokeWidth:3.5,markerEnd:"url(#arrow-highlight)",opacity:1},edgeLowlight:{markerEnd:"url(#arrow-lowlight)",opacity:.5},edgeSelected:{strokeWidth:3.5,markerEnd:"url(#arrow-selected)"},edgeLabel:{opacity:1,textAlign:"right",fontSize:"7pt",userSelect:"none"},edgeLabelHighlight:{opacity:1},edgeLabelLowlight:{opacity:.5},edgeLabelSelected:{opacity:1}}))(DagEdge);try{DagEdge.displayName="DagEdge",DagEdge.__docgenInfo={description:"",displayName:"DagEdge",props:{points:{defaultValue:null,description:"Edge point coordinates.",name:"points",required:!0,type:{name:"{ x: number; y: number; }[]"}},shape:{defaultValue:null,description:"Line style.",name:"shape",required:!1,type:{name:'"line" | "curve"'}},color:{defaultValue:null,description:"Line color palette.",name:"color",required:!1,type:{name:'"normal" | "selected" | "highlight" | "lowlight"'}},label:{defaultValue:null,description:"Text string to display on edge.",name:"label",required:!1,type:{name:"string"}},mouseHandlers:{defaultValue:null,description:"Mouse event handlers which should be spread on the node.",name:"mouseHandlers",required:!0,type:{name:"{ onClick?: (e: SyntheticEvent<Element, Event>) => void; onDoubleClick?: (e: SyntheticEvent<Element, Event>) => void; onMouseOver?: (e: SyntheticEvent<Element, Event>) => void; onMouseOut?: (e: SyntheticEvent<...>) => void; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/layouts/DagLayout/DagEdge.tsx#DagEdge"]={docgenInfo:DagEdge.__docgenInfo,name:"DagEdge",path:"src/layouts/DagLayout/DagEdge.tsx#DagEdge"})}catch(__react_docgen_typescript_loader_error){}},857:function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});const cola=__importStar(__webpack_require__(858)),data_utils_1=__webpack_require__(365);function layout(nodes,edges,callback,config={}){const{flowDirection:kFlowDirection="south",flowSpacing:kFlowSpacing=75,alignChildren:kAlignChildren=!1}=config,kDefaultNodeSize=0,kGroupPadding=10,kPortLength=10,nodeIdxLookup=data_utils_1.arr2obj(nodes,(node,idx)=>[node.id,idx]),parentIdLookup={};let numLeafNodes=0;const traverseSet=new Set;nodes.forEach(node=>(function traverseNode(nodeId,processed){if(processed.has(nodeId))return;processed.add(nodeId);const node=nodes[nodeIdxLookup[nodeId]];if(0!==node.children.length)for(let childId of node.children)parentIdLookup[childId]=node.id,traverseNode(childId,processed);else numLeafNodes+=1})(node.id,traverseSet));let graph={vertices:[],links:[],constraints:[],groups:[],ports:[]},vertexIdxLookup={};const groupIdxLookup={};function getNodeInfo(nodeId){return void 0!==vertexIdxLookup[nodeId]?{type:"vertex",idx:vertexIdxLookup[nodeId],obj:graph.vertices[vertexIdxLookup[nodeId]]}:void 0!==groupIdxLookup[nodeId]?{type:"group",idx:groupIdxLookup[nodeId],obj:graph.groups[groupIdxLookup[nodeId]]}:null}const dummyLinkLookup=new Set;function addDummyLink(startIdx,endIdx){const key=`${startIdx}->${endIdx}`;dummyLinkLookup.has(key)||(dummyLinkLookup.add(key),graph.links.push({source:startIdx,target:endIdx}))}const separationConstraintLookup=new Set;function addSeparationConstraint(startIdx,endIdx,flowDirection=kFlowDirection,kwargs={}){const key=`${startIdx}-${flowDirection}->${endIdx}`;if(separationConstraintLookup.has(key))return;let options;switch(separationConstraintLookup.add(key),flowDirection){case"west":options={axis:"x",left:endIdx,right:startIdx};break;case"north":options={axis:"y",left:endIdx,right:startIdx};break;case"east":options={axis:"x",left:startIdx,right:endIdx};break;case"south":default:options={axis:"y",left:startIdx,right:endIdx}}const{gap:gap=kFlowSpacing,equality:equality=!1}=kwargs,constraint=Object.assign({type:"separation"},options,{gap:gap,equality:equality});graph.constraints.push(constraint)}function processNode(nodeId,processed){if(processed[nodeId])return processed[nodeId];const node=nodes[nodeIdxLookup[nodeId]];if(0===node.children.length){const vertexIdx=function addVertex(nodeId,vertex){let idx=graph.vertices.length;return vertexIdxLookup[nodeId]=idx,graph.vertices.push(vertex),idx}(nodeId,{width:node.width||kDefaultNodeSize,height:node.height||kDefaultNodeSize});return processed[nodeId]={vertexIdx:vertexIdx},processed[nodeId]}const leaves=[],subgroups=[];for(let childId of node.children){const{vertexIdx:childVertexIdx,groupIdx:childGroupIdx}=processNode(childId,processed);void 0!==childGroupIdx&&subgroups.push(childGroupIdx),void 0!==childVertexIdx&&leaves.push(childVertexIdx)}const groupIdx=function addGroup(nodeId,subgroups,leaves){const idx=graph.groups.length;return groupIdxLookup[nodeId]=idx,graph.groups.push({leaves:leaves,groups:subgroups,padding:kGroupPadding}),idx}(nodeId,subgroups,leaves);return processed[nodeId]={groupIdx:groupIdx},processed[nodeId]}const processCache={};function findLeafDescendants(startId){const leaves=[];return function dfs(nodeId){const node=nodes[nodeIdxLookup[nodeId]];if(0!==node.children.length)for(let childId of node.children)dfs(childId);else leaves.push(nodeId)}(startId),leaves}nodes.forEach(node=>processNode(node.id,processCache)),edges.forEach(edge=>(function processEdge(edgeId,startId,endId){const lcaId=findLowestCommonAncestor(parentIdLookup,startId,endId);let lcaFlowDirection=kFlowDirection;lcaId&&(lcaFlowDirection=nodes[nodeIdxLookup[lcaId]].flowDirection||lcaFlowDirection);for(let startLeafId of findLeafDescendants(startId)){const startLeafIdx=vertexIdxLookup[startLeafId];for(let endLeafId of findLeafDescendants(endId)){const endLeafIdx=vertexIdxLookup[endLeafId];addDummyLink(startLeafIdx,endLeafIdx),addSeparationConstraint(startLeafIdx,endLeafIdx,lcaFlowDirection)}}})(edge.id,edge.startId,edge.endId)),console.log("layout.js -- Done building up graph data structures.",graph);(new cola.Layout).avoidOverlaps(!0).handleDisconnected(!0).nodes(graph.vertices).links(graph.links).constraints(graph.constraints).groups(graph.groups).groupCompactness(1e-5).linkDistance(kFlowSpacing).convergenceThreshold(.001).start(10,20,30,0,!1,!1);console.log("layout.js -- Done with preliminary layout.",graph);let portLookup={};function addPortVertex(nodeId,portName,x,y){let idx=graph.ports.length;return nodeId in portLookup||(portLookup[nodeId]={}),portLookup[nodeId][portName]=idx,graph.ports.push({width:1,height:1,x:x,y:y,bounds:new cola.Rectangle(x-.5,x+.5,y-.5,y+.5),index:idx+graph.vertices.length+graph.groups.length}),idx}nodes.forEach(node=>(function processPorts(nodeId){const node=nodes[nodeIdxLookup[nodeId]];if(void 0===node.ports)return;const portsBySide={north:[],south:[],east:[],west:[]};for(let portName in node.ports){const side=node.ports[portName].side;portsBySide[side].push(portName)}for(let _side of["north","south","east","west"]){let side=_side;portsBySide[side].sort((portName1,portName2)=>void 0===node.ports[portName1].order||void 0===node.ports[portName2].order?0:node.ports[portName2].order-node.ports[portName1].order),portsBySide[side].forEach((portName,i)=>{const obj=getNodeInfo(nodeId).obj,sep=portsBySide[side].length+1;let pos;switch(side){case"west":pos={x:obj.bounds.x-kPortLength,y:obj.bounds.y+obj.bounds.height()/sep*(i+1)};break;case"east":pos={x:obj.bounds.X+kPortLength,y:obj.bounds.y+obj.bounds.height()/sep*(i+1)};break;case"north":pos={x:obj.bounds.x+obj.bounds.width()/sep*(i+1),y:obj.bounds.y-kPortLength};break;case"south":default:pos={x:obj.bounds.x+obj.bounds.width()/sep*(i+1),y:obj.bounds.Y+kPortLength}}addPortVertex(nodeId,portName,pos.x,pos.y)})}})(node.id)),graph.links=edges.map(edge=>{let source=getNodeInfo(edge.startId).obj,target=getNodeInfo(edge.endId).obj;return edge.startPort&&(source=graph.ports[portLookup[edge.startId][edge.startPort]]),edge.endPort&&(target=graph.ports[portLookup[edge.endId][edge.endPort]]),{source:source,target:target}}),graph.vertices.forEach(v=>{}),graph.groups.forEach(_g=>{const g=_g;g.children=g.groups.map(subg=>subg.index).concat(g.leaves.map(l=>l.index))});const paths=new cola.GridRouter([...graph.vertices,...graph.groups,...graph.ports],{getChildren:v=>v.children,getBounds:v=>v.bounds},kPortLength).routeEdges(graph.links,10,e=>e.source.index,e=>e.target.index).map(route=>[route[0][0]].concat(...route.map(seg=>seg[1])));function getGroupDims(nodeId){const g=graph.groups[groupIdxLookup[nodeId]];return{x:g.bounds.x,y:g.bounds.y,z:1,width:g.bounds.width(),height:g.bounds.height()}}function getVertexDims(nodeId){const v=graph.vertices[vertexIdxLookup[nodeId]];return{x:v.bounds.x,y:v.bounds.y,z:1,width:v.bounds.width(),height:v.bounds.height()}}let minX,minY,maxX,maxY;const nodeDimsLookup={};for(let node of nodes){const{id:id}=node;let dims;dims=void 0!==groupIdxLookup[id]?getGroupDims(id):getVertexDims(id),nodeDimsLookup[id]=dims,minX=void 0===minX?dims.x:Math.min(minX,dims.x),minY=void 0===minY?dims.y:Math.min(minY,dims.y),maxX=void 0===maxX?dims.x+dims.width:Math.max(maxX,dims.x+dims.width),maxY=void 0===maxY?dims.y+dims.height:Math.max(maxY,dims.y+dims.height)}void 0!==minX&&void 0!==minY&&void 0!==maxX&&void 0!==maxY?(paths.forEach(segment=>segment.forEach(point=>{minX=Math.min(minX,point.x-10),minY=Math.min(minY,point.y-10),maxX=Math.max(maxX,point.y+10)})),callback(maxX-minX,maxY-minY,nodes.map(node=>{const{id:id}=node,dims=nodeDimsLookup[id];return Object.assign({},node,{x:dims.x-minX,y:dims.y-minY,z:dims.z,width:dims.width,height:dims.height})}),edges.map((edge,i)=>{const{startId:startId,endId:endId,startPort:startPort,endPort:endPort}=edge,start=nodeDimsLookup[startId],end=nodeDimsLookup[endId];let points=paths[i].map(point=>({x:point.x-minX,y:point.y-minY}));function getDelta(side){switch(side){default:case"south":return{x:0,y:-kPortLength};case"north":return{x:0,y:kPortLength};case"east":return{x:-kPortLength,y:0};case"west":return{x:kPortLength,y:0}}}if(startPort){const d=getDelta(nodes[nodeIdxLookup[startId]].ports[startPort].side);points.unshift({x:points[0].x+d.x,y:points[0].y+d.y})}if(endPort){const d=getDelta(nodes[nodeIdxLookup[endId]].ports[endPort].side);points.push({x:points[points.length-1].x+d.x,y:points[points.length-1].y+d.y})}return Object.assign({},edge,{points:points,z:Math.max(start.z,end.z)+.5})}))):console.error("Cannot calculate one of minX, minY, maxX, maxY for graph.")}function findLowestCommonAncestor(parents,leftId,rightId){const visited=new Set;let left=leftId,right=rightId;for(;left||right;){if(left){if(visited.has(left))return left;visited.add(left),left=parents[left]}if(right){if(visited.has(right))return right;visited.add(right),right=parents[right]}}return null}exports.default=layout,exports.findLowestCommonAncestor=findLowestCommonAncestor;try{layout.displayName="layout",layout.__docgenInfo={description:"@param nodes\n@param edges\n@param callback\n@param alignments",displayName:"layout",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/layouts/DagLayout/layout.ts#layout"]={docgenInfo:layout.__docgenInfo,name:"layout",path:"src/layouts/DagLayout/layout.ts#layout"})}catch(__react_docgen_typescript_loader_error){}},86:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Viewer_1=__webpack_require__(343);exports.default=Viewer_1.default,function __export(m){for(var p in m)exports.hasOwnProperty(p)||(exports[p]=m[p])}(__webpack_require__(343))},865:function(module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const lodash_1=__importDefault(__webpack_require__(358));class ViewerSelector{constructor(viewers){this._selected=viewers}viewerId(...ids){return this.filter(viewer=>ids.includes(viewer.viewerId))}fragmentId(...ids){return this.filter(viewer=>ids.includes(viewer.fragmentId))}type(...types){return new ViewerSelector(lodash_1.default.filter(this._selected,function fn(viewer){return types.includes(viewer.type)}))}meta(...metas){return this.filter(viewer=>{for(let[key,value]of metas)if(key in viewer.meta)return value instanceof Function?value(viewer.meta[key]):value===viewer.meta[key]})}map(fn){return new ViewerSelector(this._selected.map(fn))}filter(fn){return new ViewerSelector(this._selected.filter(fn))}forEach(fn){this._selected.forEach(fn)}}class InteractionManager{constructor(options={}){this._handlers={},this._viewers={},this._global={},this._eventQueue=[],this._isProcessingEvent=!1,this.registerViewer=(id,handleFactory)=>{this._viewers[id]=handleFactory},this.unregisterViewer=id=>{delete this._viewers[id]},this.on=(topic,handler)=>{topic in this._handlers||(this._handlers[topic]=[]),this._handlers[topic].push(handler)},this.emit=(topic,message={})=>{this._eventQueue.push({topic:topic,message:message}),this._isProcessingEvent||this._processNextEvent()};const{useMouseDefaults:useMouseDefaults=!0,useKeyboardDefaults:useKeyboardDefaults=!0,domElement:domElement=document}=options;useMouseDefaults&&this._useMouseDefaults(),domElement?(domElement.addEventListener("keydown",e=>{this.emit("KeyDown",{key:e.key})}),domElement.addEventListener("keyup",e=>{this.emit("KeyUp",{key:e.key})})):console.warn(`Keyboard interactions needs 'domElement' to attach listeners to, instead got: ${domElement}`),useKeyboardDefaults&&this._useKeyboardDefaults()}_useMouseDefaults(){this.on("Viewer.DidMouseOver",(all,message,global)=>{global.hovered!==global.selected&&all.viewerId(global.hovered).forEach(viewer=>{viewer.appearance.doSetLight("normal")}),global.hovered=message.viewerId,global.hovered!==global.selected&&all.viewerId(global.hovered).forEach(viewer=>{viewer.appearance.doSetLight("highlight")})}),this.on("Viewer.DidMouseOut",(all,message,global)=>{message.viewerId!==global.selected&&all.viewerId(message.viewerId).forEach(viewer=>{viewer.appearance.doSetLight("normal")})}),this.on("Viewer.DidClick",(all,message,global)=>{message.viewerId!==global.selected?(all.viewerId(global.selected).forEach(viewer=>{viewer.appearance.doSetLight("normal")}),global.selected=message.viewerId,all.viewerId(global.selected).forEach(viewer=>{viewer.appearance.doSetLight("selected"),"SwitchLayout"===viewer.type&&viewer.state.doIncrementMode()})):(all.viewerId(global.selected).forEach(viewer=>{viewer.appearance.doSetLight("highlight")}),global.selected=null)})}_useKeyboardDefaults(){this.on("KeyDown",(all,message,global)=>{all.viewerId(global.selected).forEach(viewer=>{switch("Escape"===message.key&&viewer.parentId&&(viewer.appearance.doSetLight("normal"),global.selected=viewer.parentId,all.viewerId(global.selected).forEach(viewer=>viewer.appearance.doSetLight("selected"))),viewer.type){case"SwitchLayout":"ArrowRight"===message.key&&viewer.state.doIncrementMode(),"ArrowLeft"===message.key&&viewer.state.doIncrementMode(-1),"Enter"===message.key&&(viewer.appearance.doSetLight("normal"),global.selected=viewer.state.mode,all.viewerId(global.selected).forEach(viewer=>viewer.appearance.doSetLight("selected")));break;case"SequenceLayout":"ArrowRight"!==message.key&&"ArrowDown"!==message.key||viewer.state.doIncrementElement(),"ArrowLeft"!==message.key&&"ArrowUp"!==message.key||viewer.state.doIncrementElement(-1),"Enter"===message.key&&(viewer.appearance.doSetLight("normal"),global.selected=viewer.state.elements[viewer.state.selectedElementIdx],all.viewerId(global.selected).forEach(viewer=>viewer.appearance.doSetLight("selected")));break;case"KeyValueLayout":"ArrowRight"===message.key&&viewer.state.doSelectValue(),"ArrowLeft"===message.key&&viewer.state.doSelectKey(),"ArrowUp"===message.key&&viewer.state.doIncrementEntry(-1),"ArrowDown"===message.key&&viewer.state.doIncrementEntry(),"Enter"===message.key&&(viewer.appearance.doSetLight("normal"),global.selected=viewer.state.entries[viewer.state.selectedEntryIdx][viewer.state.selectedEntryType],all.viewerId(global.selected).forEach(viewer=>viewer.appearance.doSetLight("selected")));break;case"FlowLayout":"ArrowRight"===message.key&&viewer.state.doIncrementElement(),"ArrowLeft"===message.key&&viewer.state.doIncrementElement(-1),"Enter"===message.key&&(viewer.appearance.doSetLight("normal"),global.selected=viewer.state.elements[viewer.state.selectedElementIdx],all.viewerId(global.selected).forEach(viewer=>viewer.appearance.doSetLight("selected")));break;case"GridLayout":"ArrowUp"===message.key&&viewer.state.doSelectNeighborCell("north"),"ArrowDown"===message.key&&viewer.state.doSelectNeighborCell("south"),"ArrowLeft"===message.key&&viewer.state.doSelectNeighborCell("west"),"ArrowRight"===message.key&&viewer.state.doSelectNeighborCell("east"),"Enter"===message.key&&(viewer.appearance.doSetLight("normal"),global.selected=viewer.state.cells[viewer.state.selectedCellIdx],all.viewerId(global.selected).forEach(viewer=>viewer.appearance.doSetLight("selected")))}})}),this.on("Grid.DidSelectCell",(all,message,global)=>{global.selected===message.viewerId&&all.viewerId(message.viewerId).forEach(grid=>{all.viewerId(grid.state.cells[message.prevSelectedCellIdx]).forEach(viewer=>viewer.appearance.doSetLight("normal")),all.viewerId(grid.state.cells[message.selectedCellIdx]).forEach(viewer=>viewer.appearance.doSetLight("highlight"))})}),this.on("Sequence.DidSelectElement",(all,message,global)=>{global.selected===message.viewerId&&all.viewerId(message.viewerId).forEach(sequence=>{all.viewerId(sequence.state.elements[message.prevSelectedElementIdx]).forEach(viewer=>viewer.appearance.doSetLight("normal")),all.viewerId(sequence.state.elements[message.selectedElementIdx]).forEach(viewer=>viewer.appearance.doSetLight("highlight"))})}),this.on("KeyValue.DidSelectEntry",(all,message,global)=>{global.selected===message.viewerId&&all.viewerId(message.viewerId).forEach(kv=>{all.viewerId(kv.state.entries[message.prevSelectedEntryIdx][message.prevSelectedEntryType]).forEach(viewer=>viewer.appearance.doSetLight("normal")),all.viewerId(kv.state.entries[message.selectedEntryIdx][message.selectedEntryType]).forEach(viewer=>viewer.appearance.doSetLight("highlight"))})})}_processNextEvent(){this._isProcessingEvent=!0;const curr=this._eventQueue.shift();if(!curr)return void(this._isProcessingEvent=!1);const{topic:topic,message:message}=curr;topic in this._handlers&&this._handlers[topic].forEach(handler=>handler(new ViewerSelector(lodash_1.default.values(this._viewers).map(handleFactory=>handleFactory())),message,this._global)),this._isProcessingEvent=!1,this._eventQueue.length>0&&this._processNextEvent()}}exports.InteractionManager=InteractionManager;try{InteractionManager.displayName="InteractionManager",InteractionManager.__docgenInfo={description:"Configuration object used to define how user interactions should be handled by the `Viewer`s\nand/or the external application. This `InteractionManager` adopts a Pub/Sub model for attaching\r\nevent handlers to different topics (i.e. channels for messages). By using `ViewerSelector`s and \r\n`ViewerHandle`s, it is possible to target specific `Viewer`s to query and manipulate.",displayName:"InteractionManager",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/interaction/manager.ts#InteractionManager"]={docgenInfo:InteractionManager.__docgenInfo,name:"InteractionManager",path:"src/interaction/manager.ts#InteractionManager"})}catch(__react_docgen_typescript_loader_error){}},866:function(module,exports,__webpack_require__){"use strict";var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result};Object.defineProperty(exports,"__esModule",{value:!0});const React=__importStar(__webpack_require__(0));exports.InteractionContext=React.createContext({registerViewer:()=>{},unregisterViewer:()=>{},emit:()=>{}});class InteractionProvider extends React.PureComponent{render(){const{children:children,manager:manager}=this.props,{registerViewer:registerViewer,unregisterViewer:unregisterViewer,emit:emit}=manager;return React.createElement(exports.InteractionContext.Provider,{value:{registerViewer:registerViewer,unregisterViewer:unregisterViewer,emit:emit}},children)}}exports.InteractionProvider=InteractionProvider;try{InteractionProvider.displayName="InteractionProvider",InteractionProvider.__docgenInfo={description:"",displayName:"InteractionProvider",props:{manager:{defaultValue:null,description:"",name:"manager",required:!0,type:{name:"InteractionManager"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/interaction/context.tsx#InteractionProvider"]={docgenInfo:InteractionProvider.__docgenInfo,name:"InteractionProvider",path:"src/interaction/context.tsx#InteractionProvider"})}catch(__react_docgen_typescript_loader_error){}}},[[374,1,2]]]);
//# sourceMappingURL=main.b7c4668c2c5633411d3e.bundle.js.map